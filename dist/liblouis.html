<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for liblouis (version 3.20.0, 6 December 2021),
a Braille Translation and Back-Translation Library derived from the
Linux screen reader BRLTTY.


Copyright (C) 1999-2006 by the BRLTTY Team.

Copyright (C) 2004-2007 ViewPlus Technologies, Inc.
www.viewplus.com.

Copyright (C) 2007, 2009 Abilitiessoft, Inc.
www.abilitiessoft.org.

Copyright (C) 2014, 2016 Swiss Library for the Blind, Visually
Impaired and Print Disabled. www.sbs.ch.


This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Lesser (or library) General Public License
(LGPL) as published by the Free Software Foundation; either version 3,
or (at your option) any later version.

This file is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser (or Library) General Public License LGPL for more details.

You should have received a copy of the GNU Lesser (or Library) General
Public License (LGPL) along with this program; see the file COPYING.
If not, write to the Free Software Foundation, 51 Franklin Street,
Fifth Floor, Boston, MA 02110-1301, USA. -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Liblouis User&rsquo;s and Programmer&rsquo;s Manual</title>

<meta name="description" content="Liblouis User&rsquo;s and Programmer&rsquo;s Manual">
<meta name="keywords" content="Liblouis User&rsquo;s and Programmer&rsquo;s Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#Concept-Index" rel="index" title="Concept Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Liblouis User&rsquo;s and Programmer&rsquo;s Manual</h1>












<span id="SEC_Contents"></span>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a id="toc-Introduction-1" href="#Introduction">1 Introduction</a>
  <ul class="no-bullet">
    <li><a id="toc-Who-is-this-manual-for" href="#Who-is-this-manual-for">1.1 Who is this manual for</a></li>
    <li><a id="toc-How-to-read-this-manual" href="#How-to-read-this-manual">1.2 How to read this manual</a></li>
  </ul></li>
  <li><a id="toc-How-to-Write-Translation-Tables-1" href="#How-to-Write-Translation-Tables">2 How to Write Translation Tables</a>
  <ul class="no-bullet">
    <li><a id="toc-Overview-1" href="#Overview">2.1 Overview</a></li>
    <li><a id="toc-Hyphenation-Tables-1" href="#Hyphenation-Tables">2.2 Hyphenation Tables</a></li>
    <li><a id="toc-Character_002dDefinition-Opcodes-1" href="#Character_002dDefinition-Opcodes">2.3 Character-Definition Opcodes</a></li>
    <li><a id="toc-Braille-Indicator-Opcodes-1" href="#Braille-Indicator-Opcodes">2.4 Braille Indicator Opcodes</a></li>
    <li><a id="toc-Opcodes-for-Standing-Alone-Sequences-1" href="#Opcodes-for-Standing-Alone-Sequences">2.5 Opcodes for <em>Standing Alone</em> Sequences</a></li>
    <li><a id="toc-Emphasis-Opcodes-1" href="#Emphasis-Opcodes">2.6 Emphasis Opcodes</a>
    <ul class="no-bullet">
      <li><a id="toc-Emphasis-classes-1" href="#Emphasis-classes">2.6.1 Emphasis classes</a></li>
      <li><a id="toc-Emphasis-indicators-1" href="#Emphasis-indicators">2.6.2 Emphasis indicators</a>
      <ul class="no-bullet">
        <li><a id="toc-Permanent-indicator-1" href="#Permanent-indicator">2.6.2.1 Permanent indicator</a></li>
        <li><a id="toc-Letter-indicator-1" href="#Letter-indicator">2.6.2.2 Letter indicator</a></li>
        <li><a id="toc-Word-indicator-1" href="#Word-indicator">2.6.2.3 Word indicator</a></li>
        <li><a id="toc-Phrase-indicator-1" href="#Phrase-indicator">2.6.2.4 Phrase indicator</a></li>
      </ul></li>
      <li><a id="toc-Note-about-fallback-behavior-1" href="#Note-about-fallback-behavior">2.6.3 Note about fallback behavior</a></li>
      <li><a id="toc-Computer-braille-1" href="#Computer-braille">2.6.4 Computer braille</a></li>
    </ul></li>
    <li><a id="toc-Special-Symbol-Opcodes-1" href="#Special-Symbol-Opcodes">2.7 Special Symbol Opcodes</a></li>
    <li><a id="toc-Special-Processing-Opcodes-1" href="#Special-Processing-Opcodes">2.8 Special Processing Opcodes</a></li>
    <li><a id="toc-Translation-Opcodes-1" href="#Translation-Opcodes">2.9 Translation Opcodes</a></li>
    <li><a id="toc-Character_002dClass-Opcodes-1" href="#Character_002dClass-Opcodes">2.10 Character-Class Opcodes</a></li>
    <li><a id="toc-Swap-Opcodes-1" href="#Swap-Opcodes">2.11 Swap Opcodes</a></li>
    <li><a id="toc-The-Context-and-Multipass-Opcodes-1" href="#The-Context-and-Multipass-Opcodes">2.12 The Context and Multipass Opcodes</a></li>
    <li><a id="toc-The-correct-Opcode-1" href="#The-correct-Opcode">2.13 The correct Opcode</a></li>
    <li><a id="toc-The-match-Opcode-1" href="#The-match-Opcode">2.14 The match Opcode</a></li>
    <li><a id="toc-Miscellaneous-Opcodes-1" href="#Miscellaneous-Opcodes">2.15 Miscellaneous Opcodes</a></li>
  </ul></li>
  <li><a id="toc-Notes-on-Back_002dTranslation-1" href="#Notes-on-Back_002dTranslation">3 Notes on Back-Translation</a>
  <ul class="no-bullet">
    <li><a id="toc-General-Notes-1" href="#General-Notes-1">3.1 General Notes</a></li>
    <li><a id="toc-Back_002dtranslation-with-Liblouis-1" href="#Back_002dtranslation-with-Liblouis-1">3.2 Back-translation with Liblouis</a></li>
  </ul></li>
  <li><a id="toc-Table-Metadata-1" href="#Table-Metadata">4 Table Metadata</a>
  <ul class="no-bullet">
    <li><a id="toc-Syntax" href="#Syntax">4.1 Syntax</a></li>
    <li><a id="toc-Query-Syntax-1" href="#Query-Syntax-1">4.2 Query Syntax</a></li>
  </ul></li>
  <li><a id="toc-Testing-Translation-Tables-interactively-1" href="#Testing-Translation-Tables-interactively">5 Testing Translation Tables interactively</a>
  <ul class="no-bullet">
    <li><a id="toc-lou_005fdebug-1" href="#lou_005fdebug">5.1 lou_debug</a></li>
    <li><a id="toc-lou_005ftrace-1" href="#lou_005ftrace">5.2 lou_trace</a></li>
    <li><a id="toc-lou_005fchecktable-1" href="#lou_005fchecktable">5.3 lou_checktable</a></li>
    <li><a id="toc-lou_005fallround-1" href="#lou_005fallround">5.4 lou_allround</a></li>
    <li><a id="toc-lou_005ftranslate-1" href="#lou_005ftranslate-_0028program_0029">5.5 lou_translate</a></li>
    <li><a id="toc-lou_005fcheckhyphens-1" href="#lou_005fcheckhyphens">5.6 lou_checkhyphens</a></li>
    <li><a id="toc-lou_005fcheckyaml-1" href="#lou_005fcheckyaml">5.7 lou_checkyaml</a></li>
  </ul></li>
  <li><a id="toc-Automated-Testing-of-Translation-Tables-1" href="#Automated-Testing-of-Translation-Tables">6 Automated Testing of Translation Tables</a>
  <ul class="no-bullet">
    <li><a id="toc-YAML-Tests-1" href="#YAML-Tests-1">6.1 YAML Tests</a>
    <ul class="no-bullet">
      <li><a id="toc-Optional-test-description" href="#Optional-test-description">6.1.1 Optional test description</a></li>
      <li><a id="toc-Testing-multiple-tables-within-the-same-YAML-test-file" href="#Testing-multiple-tables-within-the-same-YAML-test-file">6.1.2 Testing multiple tables within the same YAML test file</a></li>
      <li><a id="toc-Multiple-test-sections-for-each-table" href="#Multiple-test-sections-for-each-table">6.1.3 Multiple test sections for each table</a></li>
      <li><a id="toc-Inline-definition-of-tables-1" href="#Inline-definition-of-tables-1">6.1.4 Inline definition of tables</a></li>
      <li><a id="toc-Running-the-same-test-data-on-multiple-tables" href="#Running-the-same-test-data-on-multiple-tables">6.1.5 Running the same test data on multiple tables</a></li>
    </ul></li>
  </ul></li>
  <li><a id="toc-Programming-with-liblouis-1" href="#Programming-with-liblouis">7 Programming with liblouis</a>
  <ul class="no-bullet">
    <li><a id="toc-Overview-2" href="#Overview-_0028library_0029">7.1 Overview</a></li>
    <li><a id="toc-Data-structure-of-liblouis-tables-1" href="#Data-structure-of-liblouis-tables">7.2 Data structure of liblouis tables</a></li>
    <li><a id="toc-How-tables-are-found-1" href="#How-tables-are-found">7.3 How tables are found</a></li>
    <li><a id="toc-Deprecation-of-the-logging-system-1" href="#Deprecation-of-the-logging-system">7.4 Deprecation of the logging system</a></li>
    <li><a id="toc-lou_005fversion-1" href="#lou_005fversion">7.5 lou_version</a></li>
    <li><a id="toc-lou_005ftranslateString-1" href="#lou_005ftranslateString">7.6 lou_translateString</a></li>
    <li><a id="toc-lou_005ftranslate-2" href="#lou_005ftranslate">7.7 lou_translate</a></li>
    <li><a id="toc-lou_005fbackTranslateString-1" href="#lou_005fbackTranslateString">7.8 lou_backTranslateString</a></li>
    <li><a id="toc-lou_005fbackTranslate-1" href="#lou_005fbackTranslate">7.9 lou_backTranslate</a></li>
    <li><a id="toc-lou_005fhyphenate-1" href="#lou_005fhyphenate">7.10 lou_hyphenate</a></li>
    <li><a id="toc-lou_005fcompileString-1" href="#lou_005fcompileString">7.11 lou_compileString</a></li>
    <li><a id="toc-lou_005fgetTypeformForEmphClass-1" href="#lou_005fgetTypeformForEmphClass">7.12 lou_getTypeformForEmphClass</a></li>
    <li><a id="toc-lou_005fdotsToChar-1" href="#lou_005fdotsToChar">7.13 lou_dotsToChar</a></li>
    <li><a id="toc-lou_005fcharToDots-1" href="#lou_005fcharToDots">7.14 lou_charToDots</a></li>
    <li><a id="toc-lou_005fregisterLogCallback-1" href="#lou_005fregisterLogCallback">7.15 lou_registerLogCallback</a></li>
    <li><a id="toc-lou_005fsetLogLevel-1" href="#lou_005fsetLogLevel">7.16 lou_setLogLevel</a></li>
    <li><a id="toc-lou_005flogFile-_0028deprecated_0029" href="#lou_005flogFile">7.17 lou_logFile (deprecated)</a></li>
    <li><a id="toc-lou_005flogPrint-_0028deprecated_0029" href="#lou_005flogPrint">7.18 lou_logPrint (deprecated)</a></li>
    <li><a id="toc-lou_005flogEnd-_0028deprecated_0029" href="#lou_005flogEnd">7.19 lou_logEnd (deprecated)</a></li>
    <li><a id="toc-lou_005fsetDataPath-1" href="#lou_005fsetDataPath">7.20 lou_setDataPath</a></li>
    <li><a id="toc-lou_005fgetDataPath-1" href="#lou_005fgetDataPath">7.21 lou_getDataPath</a></li>
    <li><a id="toc-lou_005fgetTable-1" href="#lou_005fgetTable">7.22 lou_getTable</a></li>
    <li><a id="toc-lou_005ffindTable-1" href="#lou_005ffindTable">7.23 lou_findTable</a></li>
    <li><a id="toc-lou_005findexTables-1" href="#lou_005findexTables">7.24 lou_indexTables</a></li>
    <li><a id="toc-lou_005fcheckTable-1" href="#lou_005fcheckTable">7.25 lou_checkTable</a></li>
    <li><a id="toc-lou_005freadCharFromFile-1" href="#lou_005freadCharFromFile">7.26 lou_readCharFromFile</a></li>
    <li><a id="toc-lou_005ffree-1" href="#lou_005ffree">7.27 lou_free</a></li>
    <li><a id="toc-lou_005fcharSize-1" href="#lou_005fcharSize">7.28 lou_charSize</a></li>
    <li><a id="toc-Python-bindings-1" href="#Python-bindings">7.29 Python bindings</a></li>
  </ul></li>
  <li><a id="toc-Concept-Index-1" href="#Concept-Index" rel="index">Concept Index</a></li>
  <li><a id="toc-Opcode-Index-1" href="#Opcode-Index" rel="index">Opcode Index</a></li>
  <li><a id="toc-Function-Index-1" href="#Function-Index" rel="index">Function Index</a></li>
  <li><a id="toc-Program-Index-1" href="#Program-Index" rel="index">Program Index</a></li>
</ul>
</div>


<span id="Top"></span><span id="Liblouis-User_0027s-and-Programmer_0027s-Manual"></span><h1 class="top">Liblouis User&rsquo;s and Programmer&rsquo;s Manual</h1>

<p>This manual is for liblouis (version 3.20.0, 6 December 2021),
a Braille Translation and Back-Translation Library derived from the
Linux screen reader <acronym>BRLTTY</acronym>.
</p>

<p>Copyright &copy; 1999-2006 by the BRLTTY Team.
</p>
<p>Copyright &copy; 2004-2007 ViewPlus Technologies, Inc.
<a href="www.viewplus.com">www.viewplus.com</a>.
</p>
<p>Copyright &copy; 2007, 2009 Abilitiessoft, Inc.
<a href="www.abilitiessoft.org">www.abilitiessoft.org</a>.
</p>
<p>Copyright &copy; 2014, 2016 Swiss Library for the Blind, Visually
Impaired and Print Disabled. <a href="www.sbs.ch">www.sbs.ch</a>.
</p>

<blockquote>
<p>This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Lesser (or library) General Public License
(LGPL) as published by the Free Software Foundation; either version 3,
or (at your option) any later version.
</p>
<p>This file is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser (or Library) General Public License LGPL for more details.
</p>
<p>You should have received a copy of the GNU Lesser (or Library) General
Public License (LGPL) along with this program; see the file COPYING.
If not, write to the Free Software Foundation, 51 Franklin Street,
Fifth Floor, Boston, MA 02110-1301, USA.
</p></blockquote>


<hr>
<span id="Introduction"></span><span id="Introduction-1"></span><h2 class="chapter">1 Introduction</h2>

<p>Liblouis is an open-source braille translator and back-translator
derived from the translation routines in the BRLTTY screen reader for
Linux. It has, however, gone far beyond these routines. It is named in
honor of Louis Braille. In Linux and Mac OSX it is a shared library,
and in Windows it is a DLL. For installation instructions see the
README file. Please report bugs and oddities to the mailing list,
<a href="mailto:liblouis-liblouisxml@freelists.org">liblouis-liblouisxml@freelists.org</a>
</p>
<p>This documentation is derived from the BRLTTY manual, but
it has been extensively rewritten to cover new features.
</p>
<span id="Who-is-this-manual-for"></span><h3 class="section">1.1 Who is this manual for</h3>

<p>This manual has two main audiences: People who want to write or
improve a braille translation table and people who want to use the
braille translator library in their own programs. This manual is
probably not for people who are looking for some turn-key braille
translation software.
</p>
<span id="How-to-read-this-manual"></span><h3 class="section">1.2 How to read this manual</h3>

<p>If you are mostly interested in writing braille translation tables
then you want to focus on <a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a>. You
might want to look at <a href="#Notes-on-Back_002dTranslation">Notes on Back-Translation</a> if you are
interested in back-translation. Read <a href="#Table-Metadata">Table Metadata</a> if you want
to find out how you can augment your tables with metadata in order to
make them discoverable by programs. Finally <a href="#Testing-Translation-Tables-interactively">Testing Translation Tables interactively</a> and <a href="#Automated-Testing-of-Translation-Tables">Automated Testing of Translation Tables</a> will show how your braille translation tables can be tested
interactively and also in an automated fashion.
</p>
<p>If you want to use the braille translation library in your own program
or you are interested in enhancing the braille translation library
itself then you will want to look at <a href="#Programming-with-liblouis">Programming with liblouis</a>.
</p>
<hr>
<span id="How-to-Write-Translation-Tables"></span><span id="How-to-Write-Translation-Tables-1"></span><h2 class="chapter">2 How to Write Translation Tables</h2>

<p>For many languages there is already a translation table, so before
creating a new table start by looking at existing tables to modify
them as needed.
</p>
<p>Typically, a braille translation table consists of several parts.
First are header and includes, in which you write what the table is
for, license information and include tables you need for your table.
</p>
<p>Following this, you&rsquo;ll write various translation rules and lastly you
write special rules to handle certain situations.
</p>
<span id="index-Opcode"></span>
<p>A translation rule is composed of at least three parts: the opcode
(translation command), character(s) and braille dots. An opcode is a
command you give to a machine or a program to perform something on
your behalf. In liblouis, an opcode tells it which rule to use when
translating characters into braille. An operand can be thought of as
parameters for the translation rule and is composed of two parts: the
character or word to be translated and the braille dots.
</p>
<p>For example, suppose you want to read the word &lsquo;<samp>world</samp>&rsquo; using
braille dots &lsquo;<samp>456</samp>&rsquo;, followed by the letter &lsquo;<samp>W</samp>&rsquo; all the time.
Then you&rsquo;d write:
</p>
<div class="example">
<pre class="example">always world 456-2456
</pre></div>

<p>The word <code>always</code> is an opcode which tells liblouis to always
honor this translation, that is to say when the word &lsquo;<samp>world</samp>&rsquo; (an
operand) is encountered, always show braille dots &lsquo;<samp>456</samp>&rsquo; followed
by the letter &lsquo;<samp>w</samp>&rsquo; (&lsquo;<samp>2456</samp>&rsquo;).
</p>
<p>When you write any braille table for any language, we&rsquo;d recommend
working from some sort of official standard, and have a device or a
program in which you can test your work.
</p>

<hr>
<span id="Overview"></span><span id="Overview-1"></span><h3 class="section">2.1 Overview</h3>

<p>Many translation (contraction) tables have already been made up. They
are included in the distribution in the tables directory and can be
studied as part of the documentation. Some of the more helpful (and
normative) are listed in the following table:
</p>
<dl compact="compact">
<dt><samp>chardefs.cti</samp></dt>
<dd><p>Character definitions for U.S. tables
</p></dd>
<dt><samp>compress.ctb</samp></dt>
<dd><p>Remove excessive whitespace
</p></dd>
<dt><samp>en-us-g1.ctb</samp></dt>
<dd><p>Uncontracted American English
</p></dd>
<dt><samp>en-us-g2.ctb</samp></dt>
<dd><p>Contracted or Grade 2 American English
</p></dd>
<dt><samp>en-us-brf.dis</samp></dt>
<dd><p>Make liblouis output conform to BRF standard
</p></dd>
<dt><samp>en-us-comp8.ctb</samp></dt>
<dd><p>8-dot computer braille for use in coding examples
</p></dd>
<dt><samp>en-us-comp6.ctb</samp></dt>
<dd><p>6-dot computer braille
</p></dd>
<dt><samp>nemeth.ctb</samp></dt>
<dd><p>Nemeth Code translation for use with liblouisutdml
</p></dd>
<dt><samp>nemeth_edit.ctb</samp></dt>
<dd><p>Fixes errors at the boundaries of math and text
</p>
</dd>
</dl>

<p>The names used for files containing translation tables are completely
arbitrary. They are not interpreted in any way by the translator.
Contraction tables may be 8-bit ASCII files, UTF-8, 16-bit big-endian
Unicode files or 16-bit little-endian Unicode files. Blank lines are
ignored. Any leading and trailing whitespace (any number of blanks
and/or tabs) is ignored. Lines which begin with a number sign or hatch
mark (&lsquo;<samp>#</samp>&rsquo;) are ignored, i.e. they are comments. If the number
sign is not the first non-blank character in the line, it is treated
as an ordinary character. If the first non-blank character is
less-than (&lsquo;<samp>&lt;</samp>&rsquo;) the line is also treated as a comment. This makes
it possible to mark up tables as xhtml documents. Lines which are not
blank or comments define table entries. The general format of a table
entry is:
</p>
<div class="example">
<pre class="example">opcode operands comments
</pre></div>

<p>Table entries may not be split between lines. The opcode is a mnemonic
that specifies what the entry does. The operands may be character
sequences, braille dot patterns or occasionally something else. They
are described for each opcode, please see <a href="#Opcode-Index">Opcode Index</a>. With some
exceptions, opcodes expect a certain number of operands. Any text on
the line after the last operand is ignored, and may be a comment. A
few opcodes accept a variable number of operands. In this case a
number sign (&lsquo;<samp>#</samp>&rsquo;) begins a comment unless it is preceded by a
backslash (&lsquo;<samp>\</samp>&rsquo;).
</p>
<p>Here are some examples of table entries.
</p>
<div class="example">
<pre class="example"># This is a comment.
always world 456-2456 A word and the dot pattern of its contraction
</pre></div>

<p>Most opcodes have both a &quot;characters&quot; operand and a &quot;dots&quot; operand,
though some have only one and a few have other types.
</p>
<span id="index-Characters-operand"></span>
<p>The characters operand consists of any combination of characters and
escape sequences proceeded and followed by whitespace. Escape
sequences are used to represent difficult characters. They begin with
a backslash (&lsquo;<samp>\</samp>&rsquo;). They are:
</p>
<dl compact="compact">
<dt><kbd>\</kbd></dt>
<dd><p>backslash
</p></dd>
<dt><kbd>\f</kbd></dt>
<dd><p>form feed
</p></dd>
<dt><kbd>\n</kbd></dt>
<dd><p>new line
</p></dd>
<dt><kbd>\r</kbd></dt>
<dd><p>carriage return
</p></dd>
<dt><kbd>\s</kbd></dt>
<dd><p>blank (space)
</p></dd>
<dt><kbd>\t</kbd></dt>
<dd><p>horizontal tab
</p></dd>
<dt><kbd>\v</kbd></dt>
<dd><p>vertical tab
</p></dd>
<dt><kbd>\e</kbd></dt>
<dd><p>&quot;escape&quot; character (hex 1b, dec 27)
</p></dd>
<dt><kbd>\xhhhh</kbd></dt>
<dd><p>4-digit hexadecimal value of a character
</p>
</dd>
</dl>

<p>If liblouis has been compiled for 32-bit Unicode the following are
also recognized.
</p>
<dl compact="compact">
<dt><kbd>\yhhhhh</kbd></dt>
<dd><p>5-digit (20 bit) character
</p></dd>
<dt><kbd>\zhhhhhhhh</kbd></dt>
<dd><p>Full 32-bit value.
</p>
<p>Please take a look at the
<a href="https://unicode.org/Public/UNIDATA/">public directory of the
Unicode Character Database</a> as well as at the
<a href="https://unicode.org/Public/UNIDATA/NamesList.txt">Unicode names
list with their code points</a> to figure out the corresponding Unicode
code point for a given Unicode character.
</p>
</dd>
</dl>

<span id="index-Dots-operand"></span>
<p>The dots operand is a braille dot pattern. The real braille dots, 1
through 8, must be specified with their standard numbers.
</p>
<span id="index-Virtual-dots"></span>
<span id="virtual-dots"></span><p>liblouis recognizes <em>virtual dots</em>, which are used for special
purposes, such as distinguishing accent marks. There are seven virtual
dots. They are specified by the number 9 and the letters &lsquo;<samp>a</samp>&rsquo;
through &lsquo;<samp>f</samp>&rsquo;.
</p>
<span id="index-Multi_002dcell-dot-pattern"></span>
<p>For a multi-cell dot pattern, the cell specifications must be
separated from one another by a dash (&lsquo;<samp>-</samp>&rsquo;). For example, the
contraction for the English word &lsquo;<samp>lord</samp>&rsquo; (the letter &lsquo;<samp>l</samp>&rsquo;
preceded by dot 5) would be specified as &lsquo;<samp>5-123</samp>&rsquo;. A space may be
specified with the special dot number 0.
</p>
<p>An opcode which is helpful in writing translation tables is
<code>include</code>. Its format is:
</p>
<div class="example">
<pre class="example">include filename
</pre></div>

<p>It reads the file indicated by <code>filename</code> and incorporates or
includes its entries into the table. Included files can include other
files, which can include other files, etc. For an example, see what
files are included by the entry <code>include en-us-g1.ctb</code> in the table
<samp>en-us-g2.ctb</samp>. If the included file is not in the same directory
as the main table, use a full path name for filename. Tables can also be
specified in a table list, in which the table names are separated by
commas and given as a single table name in calls to the translation
functions.
</p>
<p>The order of the various types of opcodes or table entries is
important. Character-definition opcodes should come first. However, if
the optional <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) is used it should precede
character-definition opcodes. Braille-indicator opcodes should come
next. Translation opcodes should follow. The <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>) is a
translation opcode, even though it is considered along with the
multipass opcodes. These latter should follow the translation opcodes.
The <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) can be used anywhere after the
character-definition opcodes, but it is probably a good idea to group
all <code>correct</code> opcodes together. The <code>include</code> opcode (see <a href="#include-opcode"><code>include</code></a>) can be
used anywhere, but the order of entries in the combined table must
conform to the order given above. Within each type of opcode, the
order of entries is generally unimportant. Thus the translation
entries can be grouped alphabetically or in any other order that is
convenient. Hyphenation tables may be specified either with an 
<code>include</code> opcode or as part of a table list. They should come after 
everything else.
</p>
<hr>
<span id="Hyphenation-Tables"></span><span id="Hyphenation-Tables-1"></span><h3 class="section">2.2 Hyphenation Tables</h3>

<p>Hyphenation tables are necessary to make opcodes such as the
<code>nocross</code> opcode (see <a href="#nocross-opcode"><code>nocross</code></a>) function properly. There are no opcodes for
hyphenation table entries because these tables have a special format.
Therefore, they cannot be specified as part of an ordinary table.
Rather, they must be included using the <code>include</code> opcode (see <a href="#include-opcode"><code>include</code></a>) or as part
of a table list. The liblouis hyphenation algorithm was adopted from the
one used by OpenOffice. Note that Hyphenation tables must follow
character definitions and should preferably be the last. For an example
of a hyphenation table, see <samp>hyph_en_US.dic</samp>.
</p>
<hr>
<span id="Character_002dDefinition-Opcodes"></span><span id="Character_002dDefinition-Opcodes-1"></span><h3 class="section">2.3 Character-Definition Opcodes</h3>

<p>These opcodes are needed to define attributes such as digit,
punctuation, letter, etc. for all characters and their dot patterns.
liblouis has no built-in character definitions, but such definitions
are essential to the operation of the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>), the
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>), the multipass opcodes and the back-translator. If
the dot pattern is a single cell, it is used to define the mapping
between dot patterns and characters, unless a <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) for
that character-dot-pattern pair has been used previously. If only a
single-cell dot pattern has been given for a character, that dot
pattern is defined with the character&rsquo;s own attributes.
</p>
<p>You may have multiple definitions of a character using the same or
different dot patterns. If you use different dot patterns for the same
character, only the first dot pattern will be used during forward
translation. However, during back-translation, all the relevant dot
patterns will back-translate to the character you defined.
</p>
<p>You can also define a character multiple times using the same dot
pattern for the character, but using different character classes. The
following example would define the character &lsquo;<samp>*</samp>&rsquo; (star) as both
<code>math</code> opcode (see <a href="#math-opcode"><code>math</code></a>) and <code>sign</code> opcode (see <a href="#sign-opcode"><code>sign</code></a>).
</p>
<div class="example">
<pre class="example">math * 16
sign * 16
</pre></div>

<p>Likewise, you can define multiple characters as the same dot pattern.
The characters you define this way will be forward translated to the
same dot pattern. However, when back-translating, the dot pattern will
always back-translate to the first character that was defined with
this pattern.
</p>
<p>This technique may be useful when defining characters that have one
representation in the Windows character set (CP1252) and another
representation in the Unicode character set, e.g. the Euro sign,
&lsquo;<samp>€</samp>&rsquo;. It may also be of use when you have to define several
variants of the same letter with different accents, which may be
represented in your Braille code by the same dot pattern. This is a
very common practice for accented letters that are foreign to the
Braille code. In the following example, both e acute (&lsquo;<samp>é</samp>&rsquo;) and e
grave (&lsquo;<samp>è</samp>&rsquo;) are defined as dot 4 followed by dots 1 and 5.
</p>
<div class="example">
<pre class="example">lowercase \x00e9 4-15 # E acute
lowercase \x00e8 4-15 # E grave
</pre></div>

<p>In this example, the dot pattern would always back-translate to e
acute, since this is the first definition. You could use the
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) to correct at least the most common errors on that
account. However, there is no fail-safe way to know what accented
letter to use when you back-translate from a dot pattern representing
more than one variant.
</p>
<dl compact="compact">
<dd><span id="index-space"></span>
<span id="space-opcode"></span></dd>
<dt><code>space character dots</code></dt>
<dd><p>Defines a character as a space and also defines the dot pattern as
such. for example:
</p>
<div class="example">
<pre class="example">space \s 0 \s is the escape sequence for blank; 0 means no dots.
</pre></div>

<span id="index-punctuation"></span>
<span id="punctuation-opcode"></span></dd>
<dt><code>punctuation character dots</code></dt>
<dd><p>Associates a punctuation mark in the particular language with a
braille representation and defines the character and dot pattern as
punctuation. For example:
</p>
<div class="example">
<pre class="example">punctuation . 46 dot pattern for period in NAB computer braille
</pre></div>

<span id="index-digit"></span>
<span id="digit-opcode"></span></dd>
<dt><code>digit character dots</code></dt>
<dd><p>Associates a digit with a dot pattern and defines the character as a
digit. For example:
</p>
<div class="example">
<pre class="example">digit 0 356 NAB computer braille
</pre></div>

<span id="index-letter"></span>
<span id="letter-opcode"></span></dd>
<dt><code>letter character dots</code></dt>
<dd><p>Associates a letter in the language with a braille representation and
defines the character as a letter. This is intended for letters which
are neither uppercase nor lowercase.
</p>
<span id="index-lowercase"></span>
<span id="lowercase-opcode"></span></dd>
<dt><code>lowercase character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines the character as
a lowercase letter. Both the character and the dot pattern have the
attributes lowercase and letter.
</p>
<span id="index-uppercase"></span>
<span id="uppercase-opcode"></span></dd>
<dt><code>uppercase character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines the character as
an uppercase letter. Both the character and the dot pattern have the
attributes uppercase and letter.
</p>
<span id="index-litdigit"></span>
<span id="litdigit-opcode"></span></dd>
<dt><code>litdigit digit dots</code></dt>
<dd><p>Associates a digit with the dot pattern which should be used to
represent it in literary texts. For example:
</p>
<div class="example">
<pre class="example">litdigit 0 245
litdigit 1 1
</pre></div>

<span id="index-sign"></span>
<span id="sign-opcode"></span></dd>
<dt><code>sign character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines both as a sign.
This opcode should be used for things like at sign (&lsquo;<samp>@</samp>&rsquo;),
percent (&lsquo;<samp>%</samp>&rsquo;), dollar sign (&lsquo;<samp>$</samp>&rsquo;), etc. Do not use it to
define ordinary punctuation such as period and comma. For example:
</p>
<div class="example">
<pre class="example">sign % 4-25-1234 literary percent sign
</pre></div>

<span id="index-math"></span>
<span id="math-opcode"></span></dd>
<dt><code>math character dots</code></dt>
<dd><p>Associates a character and a dot pattern and defines them as a
mathematical symbol. It should be used for less than (&lsquo;<samp>&lt;</samp>&rsquo;),
greater than(&lsquo;<samp>&gt;</samp>&rsquo;), equals(&lsquo;<samp>=</samp>&rsquo;), plus(&lsquo;<samp>+</samp>&rsquo;), etc. For
example:
</p>
<div class="example">
<pre class="example">math + 346 plus
</pre></div>

<span id="index-grouping"></span>
<span id="grouping-opcode"></span></dd>
<dt><code>grouping name characters dots ,dots</code></dt>
<dd><p>This opcode is different from the previous ones in that it defines two
characters in one rule, and associates them with each other. The
opcode is used to indicate pairs of grouping symbols used in
processing mathematical expressions. These symbols are usually
generated by the MathML interpreter in liblouisutdml. They are used in
multipass opcodes. The name operand must contain only letters (a-z and
A-Z). The letters may be upper or lower-case but the case matters. The
characters operand must contain exactly two Unicode characters. The
dots operand must contain exactly two braille cells, separated by a
comma.
</p>
<div class="example">
<pre class="example">grouping mrow \x0001\x0002 1e,2e
grouping mfrac \x0003\x0004 3e,4e
</pre></div>

<span id="index-base"></span>
<span id="base-opcode"></span></dd>
<dt><code>base attribute character character</code></dt>
<dd>
<p>This opcode is different in that it does not associate a character
with a dot pattern, but it associates a character with another already
defined character. The derived character inherits the dot pattern of
the base character, and braille indicators (see <a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a>) are used to distinguish them. The attribute operand refers
to the character class (see <a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a>) the character
should be added to. By defining braille indicator rules associated
with this character class, you can determine the braille indicators to
be inserted. The character operands are the derived character and the
base character, respectively. A typical use of this opcode is for
defining a pair of letters, a lowercase and the corresponding
uppercase. For example:
</p>
<div class="example">
<pre class="example">lowercase a 1
base uppercase A a
</pre></div>

</dd>
</dl>

<hr>
<span id="Braille-Indicator-Opcodes"></span><span id="Braille-Indicator-Opcodes-1"></span><h3 class="section">2.4 Braille Indicator Opcodes</h3>

<p>Braille indicators are dot patterns which are inserted into the
braille text to indicate such things as capitalization, italic type,
computer braille, etc. The opcodes which define them are followed only
by a dot pattern, which may be one or more cells.
</p>
<dl compact="compact">
<dd><span id="index-modeletter"></span>
<span id="modeletter-opcode"></span></dd>
<dt><code>modeletter attribute dots</code></dt>
<dd><span id="index-capsletter"></span>
<span id="capsletter-opcode"></span></dd>
<dt><code>capsletter dots</code></dt>
<dd><p>The dot pattern which indicates that a certain mode is entered and
ends after a single character. A &ldquo;mode&rdquo; is a state in which dot
patterns must be interpreted a certain way. For example, in uppercase
mode dots &lsquo;<samp>1</samp>&rsquo; is to be interpreted as a capital &ldquo;A&rdquo; and not a
small &ldquo;a&rdquo;. In numeric mode dots &lsquo;<samp>1</samp>&rsquo; is to be interpreted as a
&ldquo;1&rdquo;. The attribute operand identifies the mode and corresponds with
the name of the character class that determines when the mode must be
entered and exited.
</p>
<p><code>modeletter</code> is also used to mark every character when a mode
must last for several characters but when there is no <code>begmode</code>
definition, or when the sequence happens in the middle of a word and
<code>begmodeword</code> is defined but no <code>endmodeword</code>
(see <a href="#begmode-opcode"><code>begmode</code></a>, <a href="#begmodeword-opcode"><code>begmodeword</code></a> and <a href="#endmodeword-opcode"><code>endmodeword</code></a>)
</p>
<p><code>capsletter</code> is an alias for <code>modeletter uppercase</code>. The
following two examples are equivalent:
</p>
<div class="example">
<pre class="example">capsletter 6
</pre></div>

<div class="example">
<pre class="example">modeletter uppercase 6
</pre></div>

<p><code>emphletter</code> (see <a href="#emphletter-opcode"><code>emphletter</code></a>) is the counterpart of
<code>modeletter</code> for indication of emphasis.
</p>
<span id="index-begmodeword"></span>
<span id="begmodeword-opcode"></span></dd>
<dt><code>begmodeword attribute dots</code></dt>
<dd><span id="index-begcapsword"></span>
<span id="begcapsword-opcode"></span></dd>
<dt><code>begcapsword dots</code></dt>
<dd><p>The dot pattern which indicates that a certain mode is entered for the
following word or remainder of the current word. The mode is
automatically terminated by the first character that is not a letter.
</p>
<p>For uppercase mode, you can define a list of characters that can
appear within a word in capitals without terminating the block. Do
this by using the <code>capsmodechars</code> opcode (see <a href="#capsmodechars-opcode"><code>capsmodechars</code></a>).
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">begcapsword 6-6
</pre></div>

<p><code>begemphword</code> (see <a href="#begemphword-opcode"><code>begemphword</code></a>) is the counterpart of
<code>begmodeword</code> for indication of emphasis.
</p>
<span id="index-endmodeword"></span>
<span id="endmodeword-opcode"></span></dd>
<dt><code>endmodeword attribute dots</code></dt>
<dd><span id="index-endcapsword"></span>
<span id="endcapsword-opcode"></span></dd>
<dt><code>endcapsword dots</code></dt>
<dd><p>The dot pattern which terminates a mode within a word. It is used in
cases where the block is not terminated automatically by a word
boundary, a number or punctuation. A common case is when an uppercase
block is followed directly by a lowercase letter.
</p>
<p>For example:
</p>
<div class="example">
<pre class="example">endcapsword 6-3
</pre></div>

<p><code>endemphword</code> (see <a href="#endemphword-opcode"><code>endemphword</code></a>) is the counterpart of
<code>endmodeword</code> for indication of emphasis.
</p>
<span id="index-capsmodechars"></span>
<span id="capsmodechars-opcode"></span></dd>
<dt><code>capsmodechars characters</code></dt>
<dd><p>Normally, any character other than a letter will automatically cancel the
<code>begcapsword</code> indicator. However, by using the
<code>capsmodechars</code> opcode, you can specify a list of characters that
are legal within a capitalized word. In some Braille codes, this might
be the case for the hyphen character, &lsquo;<samp>-</samp>&rsquo;.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">capsmodechars -
</pre></div>

<span id="index-begmode"></span>
<span id="begmode-opcode"></span></dd>
<dt><code>begmode attribute dots</code></dt>
<dd><span id="index-begcaps"></span>
<span id="begcaps-opcode"></span></dd>
<dt><code>begcaps dots</code></dt>
<dd><p>The dot pattern which indicates that a mode is entered until it is
terminated by a <code>endmode</code> indicator. It is used in some Braille
codes to mark a whole sentence or several words as capital
letters. The block can contain capital letters as well as
non-alphabetic characters, punctuation, numbers etc.
</p>
<p>This is the most general opening mark, i.e. it can be used for opening
at any position.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">begcaps 6-6-6
</pre></div>

<p><code>begemph</code> (see <a href="#begemph-opcode"><code>begemph</code></a>) is the counterpart of
<code>begmode</code> for indication of emphasis.
</p>
<span id="index-endmode"></span>
<span id="endmode-opcode"></span></dd>
<dt><code>endmode attribute dots</code></dt>
<dd><span id="index-endcaps"></span>
<span id="endcaps-opcode"></span></dd>
<dt><code>endcaps dots</code></dt>
<dd><p>The dot pattern which terminates a mode.
</p>
<div class="example">
<pre class="example">endcaps 6-3
</pre></div>

<p><code>endemph</code> (see <a href="#endemph-opcode"><code>endemph</code></a>) is the counterpart of
<code>endmode</code> for indication of emphasis.
</p>
<span id="index-letsign"></span>
<span id="letsign-opcode"></span></dd>
<dt><code>letsign dots</code></dt>
<dd><p>This indicator is needed in Grade 2 to show that a single letter is
not a contraction. It is also used when an abbreviation happens to be
a sequence of letters that is the same as a contraction. For example:
</p>
<div class="example">
<pre class="example">letsign 56
</pre></div>

<span id="index-noletsign"></span>
<span id="noletsign-opcode"></span></dd>
<dt><code>noletsign letters</code></dt>
<dd>
<p>The letters in the operand will not be proceeded by a letter sign.
More than one <code>noletsign</code> opcode can be used. This is equivalent
to a single entry containing all the letters. In addition, if a single
letter, such as &lsquo;<samp>a</samp>&rsquo; in English, is defined as a <code>word</code>
(see <a href="#word-opcode"><code>word</code></a>) or <code>largesign</code> (see <a href="#largesign-opcode"><code>largesign</code></a>), it will be
treated as though it had also been specified in a <code>noletsign</code>
entry.
</p>
<span id="index-noletsignbefore"></span>
<span id="noletsignbefore-opcode"></span></dd>
<dt><code>noletsignbefore characters</code></dt>
<dd><p>If any of the characters proceeds a single letter without a space a
letter sign is not used. By default the characters apostrophe
(&lsquo;<samp>'</samp>&rsquo;) and period (&lsquo;<samp>.</samp>&rsquo;) have this property. Use of a
<code>noletsignbefore</code> entry cancels the defaults. If more than one
<code>noletsignbefore</code> entry is used, the characters in all entries
are combined.
</p>
<span id="index-noletsignafter"></span>
<span id="noletsignafter-opcode"></span></dd>
<dt><code>noletsignafter characters</code></dt>
<dd><p>If any of the characters follows a single letter without a space a
letter sign is not used. By default the characters apostrophe
(&lsquo;<samp>'</samp>&rsquo;) and period (&lsquo;<samp>.</samp>&rsquo;) have this property. Use of a
<code>noletsignafter</code> entry cancels the defaults. If more than one
<code>noletsignafter</code> entry is used the characters in all entries are
combined.
</p>
<span id="index-nocontractsign"></span>
<span id="nocontractsign-opcode"></span></dd>
<dt><code>nocontractsign dots</code></dt>
<dd>
<p>The dots in this opcode are used to indicate a letter or a sequence of
letters that are not a contraction, e.g. &lsquo;<samp>CD</samp>&rsquo;
(see <a href="#contraction-opcode"><code>contraction</code></a>). The opcode is similar to the
<code>letsign</code> opcode (see <a href="#letsign-opcode"><code>letsign</code></a>).
</p>
<p><strong>Note:</strong> This opcode was implemented in Liblouis specifically in
order to support Unified English Braille (UEB). It may be used in any
table, but may have unpredicted side-effects if used outside the
intended context. Use with great care, and test thoroughly.
</p>

<span id="index-numsign"></span>
<span id="numsign-opcode"></span></dd>
<dt><code>numsign dots</code></dt>
<dd><p>The translator inserts this indicator before numbers made up of digits
defined with the <code>litdigit</code> opcode (see <a href="#litdigit-opcode"><code>litdigit</code></a>) to show that they are a number
and not letters or some other symbols. A number is terminated when a
space, a letter or any other none-<code>litdigit</code> opcode (see <a href="#litdigit-opcode"><code>litdigit</code></a>) character is
encountered.
</p>
<p>You can define characters or strings to be part of a number by using
the <code>midnum</code> opcode (see <a href="#midnum-opcode"><code>midnum</code></a>), the <code>numericmodechars</code> opcode (see <a href="#numericmodechars-opcode"><code>numericmodechars</code></a>) or the
<code>midendnumericmodechars</code> opcode (see <a href="#midendnumericmodechars-opcode"><code>midendnumericmodechars</code></a>).
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">numsign 3456
</pre></div>

<span id="index-numericnocontchars"></span>
<span id="numericnocontchars-opcode"></span></dd>
<dt><code>numericnocontchars characters</code></dt>
<dd>
<p>This opcode specifies the characters that require a
<code>nocontractsign</code> opcode (see <a href="#nocontractsign-opcode"><code>nocontractsign</code></a>) if they appear after a number with no
intervening space, e.g. &lsquo;<samp>1a</samp>&rsquo; or &lsquo;<samp>2-B</samp>&rsquo;.
</p>
<p>These characters will typically be the letters a-j, which usually
constitute the literary digits (see <code>litdigit</code> opcode (see <a href="#litdigit-opcode"><code>litdigit</code></a>)). However,
in some Braille codes, all letters fall in this category.
</p>
<p><strong>Note:</strong> This opcode is case sensitive. So, if you need a
<code>nocontractsign</code> opcode (see <a href="#nocontractsign-opcode"><code>nocontractsign</code></a>) to also appear before the capital letters
a-j, you should include these letters in the definition. This is
especially relevant if you are also using the <code>begcaps</code> and
<code>endcaps</code> opcodes (see <a href="#begcaps-opcode"><code>begcaps</code></a> and <a href="#endcaps-opcode"><code>endcaps</code></a>). In
this case, you might otherwise end up having numbers immediately
followed by capital letters with no indicator between.
</p>
<p><strong>Note:</strong> This opcode was implemented in Liblouis specifically in
order to support Unified English Braille (UEB). It may be used in any
table, but may have unpredicted side-effects if used outside the
intended context. Use with great care, and test thoroughly.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">numericnocontchars abcdefghij
</pre></div>

<span id="index-numericmodechars"></span>
<span id="numericmodechars-opcode"></span></dd>
<dt><code>numericmodechars characters</code></dt>
<dd>
<span id="index-midendnumericmodechars"></span>
<span id="midendnumericmodechars-opcode"></span></dd>
<dt><code>midendnumericmodechars characters</code></dt>
<dd>
<p>Any of these characters can appear within a number without terminating
the effect of the number sign (see <a href="#numsign-opcode"><code>numsign</code></a>). In other words,
they don&rsquo;t cancel numeric mode.
</p>
<p>The difference between the two opcodes is that
<code>numericmodechars</code> opcode (see <a href="#numericmodechars-opcode"><code>numericmodechars</code></a>) characters can appear anywhere in a
number whereas <code>midendnumericmodechars</code> opcode (see <a href="#midendnumericmodechars-opcode"><code>midendnumericmodechars</code></a>) characters can
appear only in the middle or at the end of a number. Like
<code>midendnumericmodechars</code>, <code>numericmodechars</code> characters keep
numeric mode active, but in addition they activate numeric mode
immediately when at least one digit follows, and the number sign will
precede the <code>numericmodechars</code> character in this case.
</p>
<p>Example:
</p>
<p><strong>Note:</strong> This opcode was implemented in Liblouis specifically in
order to support Unified English Braille (UEB). It may be used in any
table, but may have unpredicted side-effects if used outside the
intended context. Use with great care, and test thoroughly.
</p>
<div class="example">
<pre class="example">numericmodechars .,
midendnumericmodechars -/
</pre></div>

</dd>
</dl>

<hr>
<span id="Opcodes-for-Standing-Alone-Sequences"></span><span id="Opcodes-for-Standing-Alone-Sequences-1"></span><h3 class="section">2.5 Opcodes for <em>Standing Alone</em> Sequences</h3>

<span id="index-Standing-alone"></span>
<p>The term &ldquo;standing alone&rdquo; comes from the specification of Unified
English Braille (UEB). In Liblouis, a letter or letters-sequence is
considered to be <em>standing alone</em> if it is preceded and followed
by a space, and/or other characters that you choose as delimiters,
e.g. &lsquo;<samp>-</samp>&rsquo;. A <em>standing alone</em> sequence can be thought of as a
word in a very broad sense. With the opcodes described in this
section, you can decide what characters constitute a delimiter, and
what characters can attach to the beginning or end of a word or
<em>standing alone</em> sequence.
</p>
<p><strong>Note:</strong> The opcodes in this section were implemented in
Liblouis specifically in order to support Unified English Braille
(UEB). They may be used in any table, but may have unpredicted
side-effects if used outside the intended context. Use with great
care, and test thoroughly.
</p>
<dl compact="compact">
<dd><span id="index-seqdelimiter"></span>
<span id="seqdelimiter-opcode"></span></dd>
<dt><code>seqdelimiter &lt;characters&gt; All the characters listed with</code></dt>
<dd><p>this opcode designate a valid beginning and ending to a letter
sequence used to determine when a letter sequence is <em>standing
alone</em>. This again determines whether word contractions
(see <a href="#word-opcode"><code>word</code></a>) or nocontractsign (see <a href="#nocontractsign-opcode"><code>nocontractsign</code></a>) should
be applied.
</p>
<p>Spaces do not need to be listed as
they are automatically delimiters.
</p>
<p>For example, in UEB (section 2.6.1 page 15), any hyphen or dash count
as delimiters.
</p>
<p>This opcode can be used several times, but the characters must have
already been defined.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">seqdelimiter -—
</pre></div>

<span id="index-seqbeforechars"></span>
<span id="seqbeforechars-opcode"></span></dd>
<dt><code>seqbeforechars &lt;characters&gt;</code></dt>
<dd><p>Characters specified with this opcode may appear between a beginning
sequence delimiter and the letter sequence itself.
</p>
<p>For example, in UEB (2.6.2, page 15), opening parenthesis and opening
quotations and such are allowed.
</p>
<p>This opcode can be used several times, but the characters must have
already been defined.
</p>
<p>Example:
</p><div class="example">
<pre class="example">seqbeforechars ([{&quot;“'‘
</pre></div>

<span id="index-seqafterchars"></span>
<span id="seqafterchars-opcode"></span></dd>
<dt><code>seqafterchars &lt;chars&gt;</code></dt>
<dd><p>Characters specified with this opcode may appear between a letter
sequence itself and a end sequence delimiter.
</p>
<p>For example, in UEB (2.6.3, page 16), closing parenthesis and closing
quotations and such are allowed.
</p>
<p>This opcode can be used several times, but the characters must have
already been defined.
</p>
<p>Example:
</p><div class="example">
<pre class="example">seqafterchars  )]}&quot;”'’.,;:.!?…
</pre></div>

<span id="index-seqafterpattern"></span>
<span id="seqafterpattern-opcode"></span></dd>
<dt><code>seqafterpattern &lt;string&gt;</code></dt>
<dd><p>Specifies that a specific string of characters can be between the
letter sequence itself and an ending sequence delimiter.
</p>
<p>For example, in UEB (section 2.6.4, page 18), the &lsquo;<samp>'d</samp>&rsquo;,
&lsquo;<samp>'s</samp>&rsquo;, &lsquo;<samp>'ll</samp>&rsquo;, &lsquo;<samp>'ve</samp>&rsquo;, etc. can be after a letter sequence
provided the overall sequence is <em>standing alone</em>.
</p>
<p>This opcode may be used multiple times, once per pattern.
</p>
<p>Example:
</p><div class="example">
<pre class="example">seqafterpattern 'd
</pre></div>
</dd>
</dl>

<hr>
<span id="Emphasis-Opcodes"></span><span id="Emphasis-Opcodes-1"></span><h3 class="section">2.6 Emphasis Opcodes</h3>

<p>In many braille systems emphasis such as bold, italics or underline is
indicated using special dot patterns that mark the beginning and if
needed also the end. Some braille systems have several indicators for
different situations, i.e. an indicator for an emphasized word and
another one for an emphasized phrase. To accommodate for all these
usage scenarios liblouis provides a number of opcodes.
</p>
<p>At the same time some braille systems use different indicators for
different kinds of emphasis while others know only one kind of
emphasis. For that reason liblouis doesn&rsquo;t hard code any emphasis
types but the table author defines which kind of emphasis exist for a
specific language using the <code>emphclass</code> opcode (see <a href="#emphclass-opcode"><code>emphclass</code></a>).
</p>

<hr>
<span id="Emphasis-classes"></span><span id="Emphasis-classes-1"></span><h4 class="subsection">2.6.1 Emphasis classes</h4>

<p>The <code>emphclass</code> opcode defines the classes of emphasis that are
relevant for a particular language. For all emphasis that need special
indicators an emphasis class has to be declared.
</p>
<dl compact="compact">
<dd><span id="index-emphclass"></span>
<span id="emphclass-opcode"></span></dd>
<dt><code>emphclass &lt;emphasis class&gt;</code></dt>
<dd><p>Define an emphasis class to be used later in other emphasis related
opcodes in the table.
</p>
<div class="example">
<pre class="example">emphclass italic
emphclass underline
emphclass bold
emphclass transnote
</pre></div>

</dd>
</dl>

<hr>
<span id="Emphasis-indicators"></span><span id="Emphasis-indicators-1"></span><h4 class="subsection">2.6.2 Emphasis indicators</h4>

<p>In order to understand the capabilities of Liblouis for emphasis
handling we have to look at the different kinds of indicators that
exist and the different scopes. There are various indicators to mark
the beginning of emphasis. Where the emphasis ends depends on the type
of start indicator (the scope) and on the possible occurrence of an
end indicator. Sometimes an indicator appears in the middle of an
emphasized part in order to change the current scope.
</p>
<p>Which indicators Liblouis uses in which situation depends on the
specific combination of indicators that are defined in the table.
</p>

<hr>
<span id="Permanent-indicator"></span><span id="Permanent-indicator-1"></span><h4 class="subsubsection">2.6.2.1 Permanent indicator</h4>

<p>Many languages simply have an indicator for the beginning of emphasis
and another one for the end of the emphasis. The emphasis is
&ldquo;permanent&rdquo; in the sense that it needs an end indicator to cancel
it. It is not implicitly canceled by any character or space.
</p>
<p>Characters that are defined as <em>not emphasizable</em> in braille
(see <a href="#noemphchars-opcode"><code>noemphchars</code></a>) are not indicated as such by Liblouis. This
means that if an emphasized phrase begins or ends with such
characters, they will not be within the part enclosed by the two
indicators. Also, if multiple emphasized parts are separated by
unemphasizable characters only, it will be indicated as if it was a
single emphasized phrase, with one start indicator and one end
indicator.
</p>
<p>A table can not specify both a permanent indicator and a word
indicator (see <a href="#Word-indicator">Word indicator</a>) for a certain emphasis class.
</p>
<dl compact="compact">
<dd><span id="index-begemph"></span>
<span id="begemph-opcode"></span></dd>
<dt><code>begemph &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of emphasis.
</p>
<div class="example">
<pre class="example">begemph italic 46
</pre></div>

<p>A <code>begemph</code> rule must always be combined with a <code>endemph</code>
rule.
</p>
<span id="index-endemph"></span>
<span id="endemph-opcode"></span></dd>
<dt><code>endemph &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of emphasis.
</p>
<div class="example">
<pre class="example">endemph italic 46-36
</pre></div>

</dd>
</dl>

<dl compact="compact">
<dd><span id="index-noemphchars"></span>
<span id="noemphchars-opcode"></span></dd>
<dt><code>noemphchars &lt;emphasis class&gt; characters</code></dt>
<dd>
<p>Normally, emphasis is indicated on all characters except spaces
(characters with a <code>space</code> attribute, see <a href="#space-opcode"><code>space</code></a>). You can
change this with the <code>noemphchars</code> opcode. When this opcode is
specified, emphasis is indicated on all characters except the ones in
the list. That means that emphasis is also indicated on spaces unless
the list contains space characters (escaped, e.g. <code>\s</code>).
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">noemphchars italic \s'()
</pre></div>

</dd>
</dl>

<hr>
<span id="Letter-indicator"></span><span id="Letter-indicator-1"></span><h4 class="subsubsection">2.6.2.2 Letter indicator</h4>

<p>Some languages have special indicators for single letter emphasis. The
letter indicator will be chosen over other indicators when the next
character is emphasized, but not the characters thereafter.
</p>
<p>In some situations the letter indicator is the only way to indicate
emphasis. For instance when emphasis ends within the middle of a word,
and a word indicator exists (see <a href="#Word-indicator">Word indicator</a>), but no way to
cancel it explicitly. In this case Liblouis will use the letter
indicator for every emphasized character in the word.
</p>
<p>A table is even allowed to define only a letter indicator and no word
or permanent indicators (see <a href="#Permanent-indicator">Permanent indicator</a>), in which case the
letter indicator will be used for any emphasis. It is not very likely
that there are braille systems that work this way, but this feature
can be useful anyway.
</p>
<dl compact="compact">
<dd><span id="index-emphletter"></span>
<span id="emphletter-opcode"></span></dd>
<dt><code>emphletter &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate that the next character is emphasized.
</p>
<div class="example">
<pre class="example">emphletter italic 46-25
</pre></div>

</dd>
</dl>

<hr>
<span id="Word-indicator"></span><span id="Word-indicator-1"></span><h4 class="subsubsection">2.6.2.3 Word indicator</h4>

<p>Many languages have special indicators for emphasized words. The scope
of a word indicator is normally until the next unemphasizable
character, however this can be changed with the <code>emphmodechars</code>
opcode (see <a href="#noemphchars-opcode"><code>noemphchars</code></a> and <a href="#emphmodechars-opcode"><code>emphmodechars</code></a>).
</p>
<p>Word emphasis can also be canceled with an explicit closing
indicator. Usually a word indicator is put at the the beginning of the
word, but it may also be used for cases where the emphasis starts in
the middle of the word.
</p>
<dl compact="compact">
<dd><span id="index-begemphword"></span>
<span id="begemphword-opcode"></span></dd>
<dt><code>begemphword &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of an emphasized word
or the beginning of emphasized characters within a word.
</p>
<div class="example">
<pre class="example">begemphword underline 456-36
</pre></div>

<span id="index-endemphword"></span>
<span id="endemphword-opcode"></span></dd>
<dt><code>endemphword &lt;emphasis class&gt;  &lt;dot pattern&gt;</code></dt>
<dd><p>Word emphasis ends implicitly when the word ends. When an indication
is required to close word emphasis, i.e. when emphasis ends in the
middle of a word, then this opcode defines the braille dot pattern
that is used.
</p>
<div class="example">
<pre class="example">endemphword transnote 6-3
</pre></div>

<p>When emphasis ends in the middle of a word and there is no
<code>endemphword</code> definition, a letter indicator must be defined
(see <a href="#Letter-indicator">Letter indicator</a>).
</p>
<span id="index-emphmodechars"></span>
<span id="emphmodechars-opcode"></span></dd>
<dt><code>emphmodechars &lt;emphasis class&gt; characters</code></dt>
<dd>
<p>Normally, only spaces and unemphasizable characters (see <a href="#space-opcode"><code>space</code></a>
and <a href="#noemphchars-opcode"><code>noemphchars</code></a>) will cancel the <code>begemphword</code> indicator
(see <a href="#begemphword-opcode"><code>begemphword</code></a>). However this can be overruled with the
<code>emphmodechars</code> opcode. If <code>emphmodechars</code> is specified, any
character that is not in the specified list and is not a letter
(see <a href="#uppercase-opcode"><code>uppercase</code></a>, <a href="#lowercase-opcode"><code>lowercase</code></a> or <a href="#letter-opcode"><code>letter</code></a>) will cancel
the <code>begemphword</code> indicator. Conversely, letters and characters
that are in the list will not cancel the word indicator.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">emphmodechars underline -
</pre></div>

</dd>
</dl>

<hr>
<span id="Phrase-indicator"></span><span id="Phrase-indicator-1"></span><h4 class="subsubsection">2.6.2.4 Phrase indicator</h4>

<p>Some languages have a concept of a phrase where the emphasis is valid
for a number of words. The beginning of the phrase is indicated with a
braille dot pattern and a closing indicator is put before or after the
last word of the phrase. A phrase only contains whole words. The
phrase indicator is a special kind of permanent indicator that must be
used in combination with a word indicator (see <a href="#Permanent-indicator">Permanent indicator</a>
and <a href="#Word-indicator">Word indicator</a>).
</p>
<p>A word is defined as a character sequence that starts and ends with
emphasizable characters and does not contain characters that are both
unemphasizable and resetting (see <a href="#emphmodechars-opcode"><code>emphmodechars</code></a> and <a href="#noemphchars-opcode"><code>noemphchars</code></a>).
</p>
<p>To define how many words are considered a phrase in your language use
the <code>lenemphphrase</code> opcode (see <a href="#lenemphphrase-opcode"><code>lenemphphrase</code></a>).
</p>
<dl compact="compact">
<dd><span id="index-begemphphrase"></span>
<span id="begemphphrase-opcode"></span></dd>
<dt><code>begemphphrase &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of a phrase.
</p>
<div class="example">
<pre class="example">begemphphrase bold 456-46-46
</pre></div>

<p>A <code>begemphphrase</code> rule must always be combined with a
<code>endemphphrase</code> rule.
</p>

<span id="index-endemphphrase-before"></span>
<span id="endemphphrase-before-opcode"></span></dd>
<dt><code>endemphphrase &lt;emphasis class&gt; before &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of a phrase. The closing indicator
will be placed before the last word of the phrase.
</p>
<div class="example">
<pre class="example">endemphphrase bold before 456-46
</pre></div>

<p>If a table specifies <code>endemphphrase before</code> and the dot pattern
is the same as that of <code>begemphword</code>, the word scope applies
whenever this indicator is used (see <a href="#Word-indicator">Word indicator</a>).
</p>
<span id="index-endemphphrase-after"></span>
<span id="endemphphrase-after-opcode"></span></dd>
<dt><code>endemphphrase &lt;emphasis class&gt; after &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of a phrase. The closing
indicator will be placed after the last word of the phrase. If both
<code>endemphphrase &lt;emphasis class&gt; before</code> and <code>endemphphrase
&lt;emphasis class&gt; after</code> are defined an error will be signaled.
</p>
<div class="example">
<pre class="example">endemphphrase underline after 6-3
</pre></div>

<span id="index-lenemphphrase"></span>
<span id="lenemphphrase-opcode"></span></dd>
<dt><code>lenemphphrase &lt;emphasis class&gt; &lt;number&gt;</code></dt>
<dd><p>Define how many words are required before a sequence of words is
considered a phrase.
</p>
<div class="example">
<pre class="example">lenemphphrase underline 3
</pre></div>

<p>With the above rule, a sequence of two emphasized words will not be
indicated as a phrase, but the words will be indicated individually.
</p>
</dd>
</dl>

<hr>
<span id="Note-about-fallback-behavior"></span><span id="Note-about-fallback-behavior-1"></span><h4 class="subsection">2.6.3 Note about fallback behavior</h4>

<p>Contrary to older versions of liblouis there is limited fallback
behavior. Generally opcodes have a very specific purpose. This is done
for the sake of simplicity. While it would be possible to support more
combinations of rules, Liblouis chooses to signal an error when
certain combinations of opcodes are used (or not used).
</p>
<p>For example, when a <code>begemphphrase</code> rule is defined it is
required that there is also an <code>endemphphrase</code>
definition. <code>begemph</code> must be combined with <code>endemph</code>. A
<code>begemphphrase</code> rule is only allowed if there is also a
<code>begemphword</code>. <code>begemph</code> and <code>begemphword</code> are mutually
exclusive. Etc.
</p>
<p>When new requirements for indicating emphasis arise that are not
supported yet, either more opcode combinations might be enabled, or
more specific opcodes might be added.
</p>
<hr>
<span id="Computer-braille"></span><span id="Computer-braille-1"></span><h4 class="subsection">2.6.4 Computer braille</h4>

<p>For computer braille there are only two braille indicators, for the
beginning and end of a sequence of characters to be rendered in
computer braille. Such a sequence may also have other emphasis. The
computer braille indicators are applied not only when computer braille
is indicated in the <code>typeform</code> parameter, but also when a
sequence of characters is determined to be computer braille because it
contains a subsequence defined by the <code>compbrl</code> opcode (see <a href="#compbrl-opcode"><code>compbrl</code></a>).
</p>
<dl compact="compact">
<dd><span id="index-begcomp"></span>
<span id="begcomp-opcode"></span></dd>
<dt><code>begcomp dots</code></dt>
<dd>
<p>This braille indicator is placed before a sequence of characters
translated in computer braille, whether this sequence is indicated in
the <code>typeform</code> parameter (see <a href="#typeform-parameter"><code>typeform</code> parameter</a>) or inferred because it
contains a subsequence specified by the <code>compbrl</code> opcode (see <a href="#compbrl-opcode"><code>compbrl</code></a>).
</p>
<span id="index-endcomp"></span>
<span id="endcomp-opcode"></span></dd>
<dt><code>endcomp dots</code></dt>
<dd>
<p>This braille indicator is placed after a sequence of characters
translated in computer braille, whether this sequence is indicated in
the <code>typeform</code> parameter (see <a href="#typeform-parameter"><code>typeform</code> parameter</a>) or inferred because it
contains a subsequence specified by the <code>compbrl</code> opcode (see <a href="#compbrl-opcode"><code>compbrl</code></a>).
</p>
</dd>
</dl>

<hr>
<span id="Special-Symbol-Opcodes"></span><span id="Special-Symbol-Opcodes-1"></span><h3 class="section">2.7 Special Symbol Opcodes</h3>

<p>These opcodes define certain symbols, such as the decimal point, which
require special treatment.
</p>
<dl compact="compact">
<dd><span id="index-decpoint"></span>
<span id="decpoint-opcode"></span></dd>
<dt><code>decpoint character dots</code></dt>
<dd>
<p>This opcode defines the decimal point. It is useful if your Braille
code requires the decimal separator to show as a dot pattern different
from the normal representation of this character, i.e. period or
comma. In addition, it allows the notation &lsquo;<samp>.001</samp>&rsquo; to be
translated correctly. This notation is common in some languages
instead of &lsquo;<samp>0.001</samp>&rsquo; (no leading 0). When you use the
<code>decpoint</code> opcode, the decimal point will be taken to be part of
the number and correctly preceded by number sign.
</p>
<p>The character operand must have only one character. For example, in
<samp>en-us-g1.ctb</samp> we have:
</p>
<div class="example">
<pre class="example">decpoint . 46
</pre></div>

<span id="index-hyphen"></span>
<span id="hyphen-opcode"></span></dd>
<dt><code>hyphen character dots</code></dt>
<dd><p>This opcode defines the hyphen, that is, the character used in
compound words such as &lsquo;<samp>have-nots</samp>&rsquo;. The back-translator uses it
to determine the end of individual words.
</p>
</dd>
</dl>

<hr>
<span id="Special-Processing-Opcodes"></span><span id="Special-Processing-Opcodes-1"></span><h3 class="section">2.8 Special Processing Opcodes</h3>

<p>These opcodes cause special processing to be carried out.
</p>
<dl compact="compact">
<dd><span id="index-capsnocont"></span>
<span id="capsnocont-opcode"></span></dd>
<dt><code>capsnocont</code></dt>
<dd><p>This opcode has no operands. If it is specified, words or parts of
words in all caps are not contracted. This is needed for languages
such as Norwegian.
</p>
</dd>
</dl>

<hr>
<span id="Translation-Opcodes"></span><span id="Translation-Opcodes-1"></span><h3 class="section">2.9 Translation Opcodes</h3>

<p>These opcodes define the braille representations for character
sequences. Each of them defines an entry within the contraction table.
These entries may be defined in any order except, as noted below, when
they define alternate representations for the same character sequence.
</p>
<p>Each of these opcodes specifies a condition under which the
translation is legal, and each also has a characters operand and a
dots operand. The text being translated is processed strictly from
left to right, character by character, with the most eligible entry
for each position being used. If there is more than one eligible entry
for a given position in the text, then the one with the longest
character string is used. If there is more than one eligible entry for
the same character string, then the one defined first is is tested for
legality first. (This is the only case in which the order of the
entries makes a difference.)
</p>
<p>The characters operand is a sequence or string of characters preceded
and followed by whitespace. Each character can be entered in the
normal way, or it can be defined as a four-digit hexadecimal number
preceded by &lsquo;<samp>\x</samp>&rsquo;.
</p>
<p>The dots operand defines the braille representation for the characters
operand. It may also be specified as an equals sign (&lsquo;<samp>=</samp>&rsquo;). This
means that the the default representation for each character
(see <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>) within the sequence is to be
used. It is an error if not all the characters in the rule have been
previously defined in a character-definition rule. Note that the
&lsquo;<samp>=</samp>&rsquo; shortcut for dot patterns has a known bug<a id="DOCF1" href="#FOOT1"><sup>1</sup></a>
that might cause problems when back-translating.
</p>
<p>In what follows the word &lsquo;<samp>characters</samp>&rsquo; means a sequence of one or
more consecutive letters between spaces and/or punctuation marks.
</p>
<dl compact="compact">
<dd>
<span id="index-noback"></span>
<span id="noback-opcode"></span></dd>
<dt><code>noback opcode ...</code></dt>
<dd><p>This is an opcode prefix, that is to say, it modifies the operation of 
the opcode that follows it on the same line. noback specifies that
back-translation is not to use information on this line.
</p>
<div class="example">
<pre class="example">noback always ;\s; 0
</pre></div>

<span id="index-nofor"></span>
<span id="nofor-opcode"></span></dd>
<dt><code>nofor opcode ...</code></dt>
<dd><p>This is an opcode prefix which modifies the operation of the opcode 
following it on the same line. nofor specifies that forward translation 
is not to use the information on this line.
</p>
<span id="index-nocross"></span>
<span id="nocross-opcode"></span></dd>
<dt><code>nocross opcode characters ...</code></dt>
<dd><p><code>nocross</code> is an opcode prefix which modifies the operation of the
opcode following it. The following opcode can be <code>always</code> opcode (see <a href="#always-opcode"><code>always</code></a>) or
any other translation opcode listed below with <code>characters</code> as
the first operand. <code>nocross</code> specifies that the operation should
not be done when the characters are not all in one syllable (when they
cross a syllable boundary). For this opcode to work, a hyphenation
table must be included. If this is not done, <code>nocross</code> is
ignored. For example, if the English Grade 2 table is being used and
the appropriate hyphenation table has been included <code>nocross
always sh 146</code> will cause the &lsquo;<samp>sh</samp>&rsquo; in &lsquo;<samp>monkshood</samp>&rsquo; not to be
contracted.
</p>
<span id="index-compbrl"></span>
<span id="compbrl-opcode"></span></dd>
<dt><code>compbrl characters</code></dt>
<dd><p>If the characters are found within a block of text surrounded by
whitespace the entire block is translated according to the default
braille representations defined by the <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>, if 8-dot computer braille is enabled or according to the dot
patterns given in the <code>comp6</code> opcode (see <a href="#comp6-opcode"><code>comp6</code></a>), if 6-dot computer braille is
enabled. For example:
</p>
<div class="example">
<pre class="example">compbrl www translate URLs in computer braille
</pre></div>

<span id="index-comp6"></span>
<span id="comp6-opcode"></span></dd>
<dt><code>comp6 character dots</code></dt>
<dd><p>This opcode specifies the translation of characters in 6-dot computer
braille. The first operand must be a single character. The second
operand may specify as many cells as necessary. The opcode is somewhat
of a misnomer, since any dots, not just dots 1 through 6, can be
specified. This even includes virtual dots (see <a href="#virtual-dots">virtual dots</a>).
</p>
<span id="index-nocont"></span>
<span id="nocont-opcode"></span></dd>
<dt><code>nocont characters</code></dt>
<dd><p>Like <code>compbrl</code>, except that the string is uncontracted.
<code>prepunc</code> opcode (see <a href="#prepunc-opcode"><code>prepunc</code></a>) and <code>postpunc</code> opcode (see <a href="#postpunc-opcode"><code>postpunc</code></a>) rules are applied,
however. This is useful for specifying that foreign words should not
be contracted in an entire document.
</p>
<span id="index-replace"></span>
<span id="replace-opcode"></span></dd>
<dt><code>replace characters {characters}</code></dt>
<dd><p>Replace the first set of characters, no matter where they appear, with
the second. Note that the second operand is <em>NOT</em> a dot pattern.
It is also optional. If it is omitted the character(s) in the first
operand will be discarded. This is useful for ignoring characters. It
is possible that the &quot;ignored&quot; characters may still affect the
translation indirectly. Therefore, it is preferable to use
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>).
</p>
<span id="index-always"></span>
<span id="always-opcode"></span></dd>
<dt><code>always characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. Do <em>NOT</em> use an entry such as <code>always a 1</code>. Use the
character definition opcodes instead. For example:
</p>
<div class="example">
<pre class="example">always world 456-2456 unconditional translation
</pre></div>

<span id="index-repeated"></span>
<span id="repeated-opcode"></span></dd>
<dt><code>repeated characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. Ignore any consecutive repetitions of the same character
sequence. This is useful for shortening long strings of spaces or
hyphens or periods. For example:
</p>
<div class="example">
<pre class="example">repeated --- 36-36-36 shorten separator lines made with hyphens
</pre></div>

<span id="index-repword"></span>
<span id="repword-opcode"></span></dd>
<dt><code>repword characters dots</code></dt>
<dd><p>For some braille systems there is the requirement to remove repeated
words which are connected by some character. In Malaysian braille for
example you want to contract as follows:
</p>
<dl compact="compact">
<dt>Text:</dt>
<dd><p>&lsquo;<samp>tasik-tasik</samp>&rsquo;
</p></dd>
<dt>Grade 1:</dt>
<dd><p>&lsquo;<samp>2345-1-234-24-13-36-2345-1-234-24-13</samp>&rsquo;
</p></dd>
<dt>Grade 2:</dt>
<dd><p>&lsquo;<samp>2345-1-234-24-13-123456</samp>&rsquo;
</p></dd>
</dl>

<p>The dash and the second occurrence of &lsquo;<samp>tasik</samp>&rsquo; is replaced with
dots &lsquo;<samp>123456</samp>&rsquo;. To achieve this you can use the repword opcode as
follows:
</p>
<div class="example">
<pre class="example">repword - 123456
</pre></div>

<span id="index-rependword"></span>
<span id="rependword-opcode"></span></dd>
<dt><code>rependword characters dots, dots</code></dt>
<dd><p>Like the <code>repword</code> opcode (see <a href="#repword-opcode"><code>repword</code></a>), but for indicating a repetition of a
string at the end of a word. When characters are encountered check to
see if a part of the word before these characters (but not the whole
word) matches the string after them. If so, insert the first dot
pattern at the position where the part of the word started, replace
characters with the second dot pattern and eliminate the repeated
string and any string following another occurrence of characters that
is the same. This opcode is used in Malaysian braille. In this case
the rule is:
</p>
<div class="example">
<pre class="example">rependword - 25,123456
</pre></div>

<span id="index-largesign"></span>
<span id="largesign-opcode"></span></dd>
<dt><code>largesign characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. In addition, if two words defined as large signs follow each
other, remove the space between them. For example, in
<samp>en-us-g2.ctb</samp> the words &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo; are both
defined as large signs. Thus, in the phrase &lsquo;<samp>the cat and the dog</samp>&rsquo;
the space would be deleted between &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo;, with the
result &lsquo;<samp>the cat andthe dog</samp>&rsquo;. Of course, &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo;
would be properly contracted. The term <code>largesign</code> is a bit of
braille jargon that pleases braille experts.
</p>
<span id="index-word"></span>
<span id="word-opcode"></span></dd>
<dt><code>word characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word, that
is, are surrounded by whitespace and/or punctuation.
</p>
<span id="index-syllable"></span>
<span id="syllable-opcode"></span></dd>
<dt><code>syllable characters dots</code></dt>
<dd><p>As its name indicates, this opcode defines a &quot;syllable&quot; which must be
represented by exactly the dot patterns given. Contractions may not
cross the boundaries of this &quot;syllable&quot; either from left or right. The
character string defined by this opcode need not be a lexical
syllable, though it usually will be. The equal sign in the following
example means that the the default representation for each character
within the sequence is to be used (see <a href="#Translation-Opcodes">Translation Opcodes</a>):
</p>
<div class="example">
<pre class="example">syllable horse = sawhorse, horseradish
</pre></div>

<span id="index-joinword"></span>
<span id="joinword-opcode"></span></dd>
<dt><code>joinword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word which
is followed by whitespace and a letter. In addition remove the
whitespace. For example, <samp>en-us-g2.ctb</samp> has <code>joinword to
235</code>. This means that if the word &lsquo;<samp>to</samp>&rsquo; is followed by another
word the contraction is to be used and the space is to be omitted. If
these conditions are not met, the word is translated according to any
other opcodes that may apply to it.
</p>
<span id="index-lowword"></span>
<span id="lowword-opcode"></span></dd>
<dt><code>lowword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word
preceded and followed by whitespace. No punctuation either before or
after the word is allowed. The term <code>lowword</code> derives from the
fact that in English these contractions are written in the lower part
of the cell. For example:
</p>
<div class="example">
<pre class="example">lowword were 2356
</pre></div>

<span id="index-contraction"></span>
<span id="contraction-opcode"></span></dd>
<dt><code>contraction characters</code></dt>
<dd><p>If you look at <samp>en-us-g2.ctb</samp> you will see that some words are
actually contracted into some of their own letters. A famous example
among braille transcribers is &lsquo;<samp>also</samp>&rsquo;, which is contracted as
&lsquo;<samp>al</samp>&rsquo;. But this is also the name of a person. To take another
example, &lsquo;<samp>altogether</samp>&rsquo; is contracted as &lsquo;<samp>alt</samp>&rsquo;, but this is
the abbreviation for the alternate key on a computer keyboard.
Similarly &lsquo;<samp>could</samp>&rsquo; is contracted into &lsquo;<samp>cd</samp>&rsquo;, but this is the
abbreviation for compact disk. To prevent confusion in such cases, the
letter sign (see <code>letsign</code> opcode (see <a href="#letsign-opcode"><code>letsign</code></a>)) is placed before such letter
combinations when they actually are abbreviations, not contractions.
The <code>contraction</code> opcode tells the translator to do this.
</p>
<span id="index-sufword"></span>
<span id="sufword-opcode"></span></dd>
<dt><code>sufword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either a word
or at the beginning of a word.
</p>
<span id="index-prfword"></span>
<span id="prfword-opcode"></span></dd>
<dt><code>prfword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either a word
or at the end of a word.
</p>
<span id="index-begword"></span>
<span id="begword-opcode"></span></dd>
<dt><code>begword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the
beginning of a word.
</p>
<span id="index-begmidword"></span>
<span id="begmidword-opcode"></span></dd>
<dt><code>begmidword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either at the
beginning or in the middle of a word.
</p>
<span id="index-midword"></span>
<span id="midword-opcode"></span></dd>
<dt><code>midword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are in the middle
of a word.
</p>
<span id="index-midendword"></span>
<span id="midendword-opcode"></span></dd>
<dt><code>midendword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either in the
middle or at the end of a word.
</p>
<span id="index-endword"></span>
<span id="endword-opcode"></span></dd>
<dt><code>endword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the end of
a word.
</p>
<span id="index-partword"></span>
<span id="partword-opcode"></span></dd>
<dt><code>partword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if the characters are
anywhere in a word, that is, if they are proceeded or followed by a
letter.
</p>
<span id="index-exactdots"></span>
<span id="exactdots-opcode"></span></dd>
<dt><code>exactdots @dots</code></dt>
<dd><p>Note that the operand must begin with an at sign (&lsquo;<samp>@</samp>&rsquo;). The dot
pattern following it is evaluated for validity. If it is valid,
whenever an at sign followed by this dot pattern appears in the source
document it is replaced by the characters corresponding to the dot
pattern in the output. This opcode is intended for use in liblouisutdml
semantic-action files to specify exact dot patterns, as in
mathematical codes. For example:
</p>
<div class="example">
<pre class="example">exactdots @4-46-12356
</pre></div>
<p>will produce the characters with these dot patterns in the output.
</p>
<span id="index-prepunc"></span>
<span id="prepunc-opcode"></span></dd>
<dt><code>prepunc characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are part of
punctuation at the beginning of a word.
</p>
<span id="index-postpunc"></span>
<span id="postpunc-opcode"></span></dd>
<dt><code>postpunc characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are part of
punctuation at the end of a word.
</p>
<span id="index-begnum"></span>
<span id="begnum-opcode"></span></dd>
<dt><code>begnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the
beginning of a number, that is, before all its digits. For example, in
<samp>en-us-g1.ctb</samp> we have <code>begnum # 4</code>.
</p>
<span id="index-midnum"></span>
<span id="midnum-opcode"></span></dd>
<dt><code>midnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are in the middle
of a number. For example, <samp>en-us-g1.ctb</samp> has <code>midnum . 46</code>.
This is because the decimal point has a different dot pattern than the
period.
</p>
<span id="index-endnum"></span>
<span id="endnum-opcode"></span></dd>
<dt><code>endnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the end of
a number. For example <samp>en-us-g1.ctb</samp> has <code>endnum th 1456</code>.
This handles things like &lsquo;<samp>4th</samp>&rsquo;. A letter sign is <em>NOT</em>
inserted.
</p>
<span id="index-joinnum"></span>
<span id="joinnum-opcode"></span></dd>
<dt><code>joinnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern. In addition, if
whitespace and a number follows omit the whitespace. This opcode can
be used to join currency symbols to numbers for example:
</p>
<div class="example">
<pre class="example">joinnum \x20AC 15 (EURO SIGN)
joinnum \x0024 145 (DOLLAR SIGN)
joinnum \x00A3 1234 (POUND SIGN)
joinnum \x00A5 13456 (YEN SIGN)
</pre></div>

</dd>
</dl>

<hr>
<span id="Character_002dClass-Opcodes"></span><span id="Character_002dClass-Opcodes-1"></span><h3 class="section">2.10 Character-Class Opcodes</h3>

<p>These opcodes define and use character classes, also known as
character attributes. A character class associates a set of characters
with a name. The name then refers to any character within the class. A
character may belong to more than one class.
</p>
<p>The basic character classes correspond to the character definition
opcodes. These classes are:
</p>
<dl compact="compact">
<dt><code>space</code></dt>
<dd><p>Whitespace characters such as blank and tab
</p></dd>
<dt><code>digit</code></dt>
<dd><p>Numeric characters
</p></dd>
<dt><code>letter</code></dt>
<dd><p>Both uppercase and lowercase alphabetic characters
</p></dd>
<dt><code>lowercase</code></dt>
<dd><p>Lowercase alphabetic characters
</p></dd>
<dt><code>uppercase</code></dt>
<dd><p>Uppercase alphabetic characters
</p></dd>
<dt><code>punctuation</code></dt>
<dd><p>Punctuation marks
</p></dd>
<dt><code>sign</code></dt>
<dd><p>Signs such as percent (&lsquo;<samp>%</samp>&rsquo;)
</p></dd>
<dt><code>math</code></dt>
<dd><p>Mathematical symbols
</p></dd>
<dt><code>litdigit</code></dt>
<dd><p>Literary digit
</p>
</dd>
</dl>

<p>The opcodes which define and use character classes are shown below.
For examples see <samp>el.ctb</samp>.
</p>
<dl compact="compact">
<dd>
<span id="index-attribute"></span>
<span id="attribute-opcode"></span></dd>
<dt><code>attribute name characters</code></dt>
<dd><p>Add characters to a character class. The class may be one of the
predefined classes listed above, a user-defined class previously
created with this opcode, or a new one. The name operand must contain
only letters (a-z and A-Z, case matters). For historical reasons and
to support the <code>match</code> opcode (see <a href="#match-opcode"><code>match</code></a>) it can also be a number between 0 and
7. The characters operand must be specified as a string. Each
character in the string, as well as its dot counterpart if it occupies
a single cell, is added to the character class.
</p>
<p>A user-defined character class may not be used in other rules until it
has been created with a <code>attribute</code> rule. Numbered classes can be
used in <code>match</code> rules (see <a href="#match-opcode"><code>match</code></a>). Named classes can be used with the
<code>before</code> and <code>after</code> opcodes and in <code>context</code> and
multipass rules (see <a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a>).
</p>
<span id="index-after"></span>
<span id="after-opcode"></span></dd>
<dt><code>after class opcode ...</code></dt>
<dd><p>The specified opcode is further constrained in that the matched
character sequence must be immediately preceded by a character
belonging to the specified class. If this opcode is used more than
once on the same line then the union of the characters in all the
classes is used.
</p>
<span id="index-before"></span>
<span id="before-opcode"></span></dd>
<dt><code>before class opcode ...</code></dt>
<dd><p>The specified opcode is further constrained in that the matched
character sequence must be immediately followed by a character
belonging to the specified class. If this opcode is used more than
once on the same line then the union of the characters in all the
classes is used.
</p>
</dd>
</dl>

<hr>
<span id="Swap-Opcodes"></span><span id="Swap-Opcodes-1"></span><h3 class="section">2.11 Swap Opcodes</h3>

<p>The swap opcodes are needed to tell the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>), the
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) and multipass opcodes which dot patterns to swap
for which characters. There are three, <code>swapcd</code>, <code>swapdd</code>
and <code>swapcc</code>. The first swaps dot patterns for characters. The
second swaps dot patterns for dot patterns and the third swaps
characters for characters. The first is used in the <code>context</code>
opcode and the second is used in the multipass opcodes.
</p>
<p>All the swap opcodes have a name so they can be refered to from the
<code>context</code>, <code>correct</code> and multipass opcodes. The name operand
must contain only letters (a-z and A-Z). The letters may be upper or
lower-case but the case matters.
</p>
<p>Dot patterns are separated by commas and may contain more than one
cell.
</p>
<dl compact="compact">
<dd>
<span id="index-swapcd"></span>
<span id="swapcd-opcode"></span></dd>
<dt><code>swapcd name characters dots, dots, dots, ...</code></dt>
<dd><p>See above paragraph for explanation. For example:
</p>
<div class="example">
<pre class="example">swapcd dropped 0123456789 356,2,23,...
</pre></div>

<span id="index-swapdd"></span>
<span id="swapdd-opcode"></span></dd>
<dt><code>swapdd name dots, dots, dots ... dotpattern1, dotpattern2, dotpattern3, ...</code></dt>
<dd><p>The <code>swapdd</code> opcode defines substitutions for the multipass
opcodes. In the second operand the dot patterns must be single cells,
but in the third operand multi-cell dot patterns are allowed. This is
because multi-cell patterns in the second operand would lead to
ambiguities.
</p>
<span id="index-swapcc"></span>
<span id="swapcc-opcode"></span></dd>
<dt><code>swapcc name characters characters</code></dt>
<dd><p>The <code>swapcc</code> opcode swaps characters in its second operand for
characters in the corresponding places in its third operand. It is
intended for use with <code>correct</code> opcodes and can solve problems
such as formatting phone numbers.
</p>
</dd>
</dl>

<hr>
<span id="The-Context-and-Multipass-Opcodes"></span><span id="The-Context-and-Multipass-Opcodes-1"></span><h3 class="section">2.12 The Context and Multipass Opcodes</h3>

<p>The <code>context</code> and multipass opcodes (<code>pass2</code>, <code>pass3</code>
and <code>pass4</code>) provide translation capabilities beyond those of the
basic translation opcodes (see <a href="#Translation-Opcodes">Translation Opcodes</a>) discussed
previously. The multipass opcodes cause additional passes to be made
over the string to be translated. The number after the word
<code>pass</code> indicates in which pass the entry is to be applied. If no
multipass opcodes are given, only the first translation pass is made.
The <code>context</code> opcode is basically a multipass opcode for the
first pass. It differs slightly from the multipass opcodes per se.
When back-translating, the passes are performed in the reverse order,
i.e. <code>pass4</code>, <code>pass3</code>, <code>pass2</code>, <code>context</code>. Each
of these opcodes must be prefixed by either the <code>noback</code> opcode (see <a href="#noback-opcode"><code>noback</code></a>) or
the <code>nofor</code> opcode (see <a href="#nofor-opcode"><code>nofor</code></a>). The format of all these opcodes is <code>opcode
test action</code>. The specific opcodes are invoked as follows:
</p>
<dl compact="compact">
<dd><span id="context-opcode"></span><span id="index-context"></span>
<span id="index-pass2"></span>
<span id="index-pass3"></span>
<span id="index-pass4"></span>
</dd>
<dt><code>context test action</code></dt>
<dt><code>pass2 test action</code></dt>
<dt><code>pass3 test action</code></dt>
<dt><code>pass4 test action</code></dt>
</dl>

<p>The <code>test</code> and <code>action</code> operands have suboperands. Each
suboperand begins with a non-alphanumeric character and ends when
another non-alphanumeric character is encountered. The suboperands and
their initial characters are as follows.
</p>
<dl compact="compact">
<dt><kbd>&quot; (double quote)</kbd></dt>
<dd><p>a string of characters. This string must be terminated by another
double quote. It may contain any characters. If a double quote is
needed within the string, it must be preceded by a backslash
(&lsquo;<samp>\</samp>&rsquo;). If a space is needed, it must be represented by the escape
sequence \s. This suboperand is valid
in the test and action parts of the <code>correct</code> opcode,
in the test part of the <code>context</code> opcode when forward translating,
and in the action part of the <code>context</code> opcode when back translating.
</p>
</dd>
<dt><kbd>@ (at sign)</kbd></dt>
<dd><p>a sequence of dot patterns. Cells are separated by hyphens as usual.
This suboperand is valid in the test and action parts of
the <code>pass2</code>, <code>pass3</code>, and <code>pass4</code> opcodes,
in the action part of the <code>context</code> opcode when forward translating,
and in the test part of the <code>context</code> opcode when back translating.
</p>
</dd>
<dt><kbd>` (accent mark)</kbd></dt>
<dd><p>If this is the beginning of the string being translated this
suboperand is true. It is valid only in the test part and must be the
first thing in this operand.
</p>
</dd>
<dt><kbd>~ (tilde)</kbd></dt>
<dd><p>If this is the end of the string being translated this suboperand is
true. It is valid only in the test part and must be the last thing in
this operand.
</p>
</dd>
<dt><kbd>$ (dollar sign)</kbd></dt>
<dd><p>a string of attributes, such as &lsquo;<samp>d</samp>&rsquo; for digit, &lsquo;<samp>l</samp>&rsquo; for
letter, etc. For a list of all valid attributes see <a href="#valid-attribute-characters">valid attribute characters</a>. More than one attribute can be given. If you wish to
check characters with any attribute, use the letter &lsquo;<samp>a</samp>&rsquo;. Input
characters are checked to see if they have at least one of the
attributes. The attribute string can be followed by numbers specifying
how many characters are to be checked. If no numbers are given, 1 is
assumed. If two numbers separated by a hyphen are given, the input is
checked to make sure that at least the first number of characters with
the attributes are present, but no more than the second number. If
only one number is present, then exactly that many characters must
have the attributes. A period instead of the numbers indicates an
indefinite number of characters (for technical reasons the number of
characters that are actually matched is limited to 65535).
</p>
<p>This suboperand is valid in all test parts but not in action parts.
For the characters which can be used in attribute strings, see the
following table.
</p>
</dd>
<dt><kbd>! (exclamation point)</kbd></dt>
<dd><p>reverses the logical meaning of the suboperand which follows. For
example, !$d is true only if the character is <em>NOT</em> a digit. This
suboperand is valid in test parts only.
</p>
</dd>
<dt><kbd>% (percent sign)</kbd></dt>
<dd><p>the name of a character class, predefined or defined using the
<code>attribute</code> opcode (see <a href="#attribute-opcode"><code>attribute</code></a>), or the name of a swap set defined by the swap
opcodes (see <a href="#Swap-Opcodes">Swap Opcodes</a>). Names must contain only letters (a-z
and A-Z). The letters may be upper or lower-case but the case
matters. Character class names may be used in test parts only. Swap
names are valid everywhere.
</p>
</dd>
<dt><kbd>{ (left brace)</kbd></dt>
<dd><p>Name: the name of a grouping pair. The left brace indicates that the
first (or left) member of the pair is to be used in matching. If this
is between replacement brackets it must be the only item. This is also
valid in the action part.
</p>
<p>The brace actions, <code>{name</code> and <code>}name</code>, refer to named
groupings. A grouping is created with the <code>grouping</code> opcode (see <a href="#grouping-opcode"><code>grouping</code></a>) and
contains exactly two characters which represent the opening character
and the matching closing character for a character grouping. The first
operand is the grouping name, the second is the two (opening and
closing) characters, and the third is the two dot patterns separated
by a comma.
</p>
<p>Let&rsquo;s say that you&rsquo;d like to define the opening and closing
parentheses via multipass rules, and that you&rsquo;d like to use dots
&lsquo;<samp>123478</samp>&rsquo; for the opening parenthesis and dots &lsquo;<samp>145678</samp>&rsquo; for
the closing parenthesis. One way to do so is like this:
</p>
<div class="example">
<pre class="example">grouping parentheses () 123478,145678
noback correct {parentheses {parentheses
noback correct }parentheses }parentheses
</pre></div>

<p>The references within the test part of the multipass rule match
against the characters (the second operand) of the grouping rule, and
the references within the action part replace with the dot patterns
(the third operand) of the grouping.
</p>
</dd>
<dt><kbd>} (right brace)</kbd></dt>
<dd><p>Name: the name of a grouping pair. The right brace indicates that the
second (or right) member is to be used in matching. See the remarks on
the left brace immediately above.
</p>
</dd>
<dt><kbd>/ (slash)</kbd></dt>
<dd><p>Search the input for the expression following the slash and return
true if found. This can be used to set a variable.
</p>
</dd>
<dt><kbd>_ (underscore)</kbd></dt>
<dd><p>Move backward. If a number follows, move backward that number of
characters. The default is to move backward one character. This
suboperand is valid only in test parts. The test fails if moving
backward beyond the beginning of the input string.
</p>
</dd>
<dt><kbd>[ (left bracket)</kbd></dt>
<dd><p>start replacement here. This suboperand must always be paired with a
right bracket and is valid only in test parts. Multiple pairs of
square brackets in a single expression are not allowed.
</p>
</dd>
<dt><kbd>] (right bracket)</kbd></dt>
<dd><p>end replacement here. This suboperand must always be paired with a
left bracket and is valid only in test parts.
</p>
</dd>
<dt><kbd># (number sign or crosshatch)</kbd></dt>
<dd><p>test or set a variable. Variables are referred to by numbers
(0 through 49), e.g. <code>#1</code>, <code>#2</code>, <code>#25</code>.
Variables may be set by one <code>context</code> or multipass opcode and tested
by another. Thus, an operation that occurs at one place in a translation
can tell an operation that occurs later within the same pass about itself.
This feature is used in math translation, and may also help to alleviate
the need for new opcodes. This suboperand is valid everywhere.
</p>
<p>Variables are set in the action part. To set a variable, use an
expression like <code>#1=1</code>. All of the variables are initialized to 0
at the start of each pass.
</p>
<p>Variables can also be incremented and decremented by one in the action
part with expressions like <code>#1+</code> and <code>#3-</code> respectively.
An attempt to decrement a variable below 0 is silently ignored.
</p>
<p>Variables are tested in the test part with conditional expressions like:
<code>#1=2</code>, <code>#3&lt;4</code>, <code>#5&gt;6</code>, <code>#7&lt;=8</code>, <code>#9&gt;=10</code>.
</p>
</dd>
<dt><kbd>* (asterisk)</kbd></dt>
<dd><p>Copy the input characters or dot patterns within the replacement brackets
into the output, and discard anything else that was matched. If there are
no replacement brackets then copy all of the matched input. This
suboperand is only valid within the action part. It may be specified any
number of times. This feature is used, for example, for handling numeric
subscripts in Nemeth.
</p>
</dd>
<dt><kbd>? (question mark)</kbd></dt>
<dd><p>Valid only in the action part. The characters to be replaced are
simply ignored. That is, they are replaced with nothing. If either
member of a grouping pair is in the replace brackets the other member
at the same level is also removed.
</p>
</dd>
</dl>

<span id="valid-attribute-characters"></span><p>The valid characters which can be used in attribute strings are as
follows:
</p>
<dl compact="compact">
<dt><kbd>a</kbd></dt>
<dd><p>any attribute
</p></dd>
<dt><kbd>d</kbd></dt>
<dd><p>digit
</p></dd>
<dt><kbd>D</kbd></dt>
<dd><p>literary digit
</p></dd>
<dt><kbd>l</kbd></dt>
<dd><p>letter
</p></dd>
<dt><kbd>m</kbd></dt>
<dd><p>math
</p></dd>
<dt><kbd>p</kbd></dt>
<dd><p>punctuation
</p></dd>
<dt><kbd>S</kbd></dt>
<dd><p>sign
</p></dd>
<dt><kbd>s</kbd></dt>
<dd><p>space
</p></dd>
<dt><kbd>U</kbd></dt>
<dd><p>uppercase
</p></dd>
<dt><kbd>u</kbd></dt>
<dd><p>lowercase
</p></dd>
<dt><kbd>w</kbd></dt>
<dd><p>first user-defined character class
</p></dd>
<dt><kbd>x</kbd></dt>
<dd><p>second user-defined character class
</p></dd>
<dt><kbd>y</kbd></dt>
<dd><p>third user-defined character class
</p></dd>
<dt><kbd>z</kbd></dt>
<dd><p>fourth user-defined character class
</p></dd>
</dl>

<p>The following illustrates the algorithm how text is evaluated with
multipass expressions:
</p>
<p>Loop over context, pass2, pass3 and pass4 and do the following for each pass:
</p>
<ol type="a" start="1">
<li> Match the text following the cursor against all expressions in the
current pass. If an expression has square brackets to indicate the
part to be replaced, and the opening bracket would correspond with a
position before the cursor, it is not a match.
</li><li> If there is no match: shift the cursor one position to the right and
continue the loop
</li><li> If there are matches: choose the longest match
</li><li> Do the replacement. If the expression has square brackets, the part of
the input that matches the part in between the brackets is replaced
with the right-hand side of the rule. If the expression has no square
brackets, the whole match is replaced.
</li><li> Place the cursor after the replaced text
</li><li> continue loop
</li></ol>

<p>Normally, when a rule is applied, the characters in the input that the
rule applies to are &quot;consumed&quot;, i.e. the position of the input string
is stepped forward, and the characters are no longer available for
subsequent rules.  However, with the multipass opcodes, the
<code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>) opcode and the <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) opcode, it is
possible to make rules which don&rsquo;t consume any characters from the
input. This could happen, e.g. if you use the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>)
opcode to insert a dot pattern before a special group of characters.
In these cases, Liblouis will always advance the position by one
character to make sure that the program doesn&rsquo;t apply a rule to the
same characters again and again.
</p>
<hr>
<span id="The-correct-Opcode"></span><span id="The-correct-Opcode-1"></span><h3 class="section">2.13 The correct Opcode</h3>

<dl compact="compact">
<dd><span id="index-correct"></span>
<span id="correct-opcode"></span></dd>
<dt><code>correct test action</code></dt>
<dd><p>Because some input (such as that from an OCR program) may contain
systematic errors, it is sometimes advantageous to use a
pre-translation pass to remove them. The errors and their corrections
are specified by the <code>correct</code> opcode. If there are no
<code>correct</code> opcodes in a table, the pre-translation pass is not used.
If any back-translation corrections have been specified then they are
applied in a post-translation (i.e. the very last) pass.
</p>
<p>Note that like the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>) and multi-pass opcodes, the
<code>correct</code> opcode must be preceded by <code>noback</code> opcode (see <a href="#noback-opcode"><code>noback</code></a>) or
<code>nofor</code> opcode (see <a href="#nofor-opcode"><code>nofor</code></a>).
</p>
<p>The format of the <code>correct</code> opcode is very similar to that
of the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>). The only difference is that in the action
part strings may be used and dot patterns may not be used. Some
examples of <code>correct</code> opcode entries are:
</p>
<div class="example">
<pre class="example">noback correct &quot;\\&quot; ? Eliminate backslashes
noback correct &quot;cornf&quot; &quot;comf&quot; fix a common &quot;scano&quot;
noback correct &quot;cornm&quot; &quot;comm&quot;
noback correct &quot;cornp&quot; &quot;comp&quot;
noback correct &quot;*&quot; ? Get rid of stray asterisks
noback correct &quot;|&quot; ? ditto for vertical bars
noback correct &quot;\s?&quot; &quot;?&quot; drop space before question mark
</pre></div>

</dd>
</dl>

<hr>
<span id="The-match-Opcode"></span><span id="The-match-Opcode-1"></span><h3 class="section">2.14 The match Opcode</h3>

<p>For historical reasons despite being fairly similar in functionality
both the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>) and the match opcode exist and are in use
in modern braille tables. But in the future they might be merged under
some common opcode. For that reason consider the match opcode
<em>somewhat experimental</em>.
</p>
<dl compact="compact">
<dd><span id="index-match"></span>
<span id="match-opcode"></span></dd>
<dt><code>match pre-pattern characters post-pattern dots</code></dt>
<dd>
<p>This opcode allows for matching a string of characters via <em>pre</em>
and <em>post patterns</em>. The patterns are specified using an
expression syntax somewhat like regular expressions (see <a href="#pattern-expression-syntax">pattern expression syntax</a>). A single hyphen (&lsquo;<samp>-</samp>&rsquo;) by itself means no
pattern is specified.
</p>
<p>The following will replace &lsquo;<samp>xyz</samp>&rsquo; with the dots
&lsquo;<samp>1346-13456-1356</samp>&rsquo; when it appears in the string &lsquo;<samp>abxyzcd</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">match ab xyz cd 1346-13456-1356
</pre></div>

<p>The following will replace &lsquo;<samp>ONE</samp>&rsquo; with &lsquo;<samp>3456-1</samp>&rsquo; when it
starts the input and is followed by &lsquo;<samp>:</samp>&rsquo;
</p>
<div class="example">
<pre class="example">match ^ ONE : 3456-1
</pre></div>
</dd>
</dl>

<span id="pattern-expression-syntax"></span><p>The <code>pre-pattern</code> and the <code>post-pattern</code> can contain
any of the following expressions:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>[ ]</samp>&rsquo;</dt>
<dd><p>Expression can be any of the characters between the brackets. If only
one character present then the brackets are not needed unless it is a
special character, in which it should be escaped with the backslash.
</p>
</dd>
<dt>&lsquo;<samp>.</samp>&rsquo;</dt>
<dd><p>Expression can be any character.
</p>
</dd>
<dt>&lsquo;<samp>%[ ]</samp>&rsquo;</dt>
<dd><p>Expression is a character with the attributes listed between the
brackets. If only one character is present then the brackets are not
needed. The set of attributes are specified as follows:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>_</samp>&rsquo;</dt>
<dd><p>space
</p></dd>
<dt>&lsquo;<samp>#</samp>&rsquo;</dt>
<dd><p>digit
</p></dd>
<dt>&lsquo;<samp>a</samp>&rsquo;</dt>
<dd><p>letter
</p></dd>
<dt>&lsquo;<samp>u</samp>&rsquo;</dt>
<dd><p>uppercase
</p></dd>
<dt>&lsquo;<samp>l</samp>&rsquo;</dt>
<dd><p>lowercase
</p></dd>
<dt>&lsquo;<samp>.</samp>&rsquo;</dt>
<dd><p>punctuation
</p></dd>
<dt>&lsquo;<samp>$</samp>&rsquo;</dt>
<dd><p>sign
</p></dd>
<dt>&lsquo;<samp>~</samp>&rsquo;</dt>
<dd><p>seqdelimiter
</p></dd>
<dt>&lsquo;<samp>&lt;</samp>&rsquo;</dt>
<dd><p>seqbeforechars
</p></dd>
<dt>&lsquo;<samp>&gt;</samp>&rsquo;</dt>
<dd><p>seqafterchars
</p> 
</dd>
</dl>

</dd>
<dt>&lsquo;<samp>^</samp>&rsquo;</dt>
<dd><p>Match at the end of input processing (or beginning depending of the
direction pre or post).
</p>
</dd>
<dt>&lsquo;<samp>$</samp>&rsquo;</dt>
<dd><p>Same as &lsquo;<samp>^</samp>&rsquo;.
</p></dd>
</dl>

<p>For example the following will replace &lsquo;<samp>bb</samp>&rsquo; with the dots &lsquo;<samp>23</samp>&rsquo; when it
is between letters.
</p>
<div class="example">
<pre class="example">match %a bb %a 23
</pre></div>

<p>The following will replace &lsquo;<samp>con</samp>&rsquo; with the dots &lsquo;<samp>25</samp>&rsquo; when it
is preceded by a space or beginning of input, and followed by an
&lsquo;<samp>s</samp>&rsquo; and then any letter.
</p>
<div class="example">
<pre class="example">match %[^_] con s%a 25
</pre></div>

<p>Similar to regular expressions the pattern expressions can contain
grouping, quantifiers and even negation:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>( )</samp>&rsquo;</dt>
<dd><p>Expressions between parentheses are grouped together as one
expression.
</p>
</dd>
<dt>&lsquo;<samp>!</samp>&rsquo;</dt>
<dd><p>The following expression is negated.
</p>
</dd>
<dt>&lsquo;<samp>?</samp>&rsquo;</dt>
<dd><p>The previous expression must match zero or one times.
</p>
</dd>
<dt>&lsquo;<samp>*</samp>&rsquo;</dt>
<dd><p>The previous expression must match zero or more times.
</p>
</dd>
<dt>&lsquo;<samp>+</samp>&rsquo;</dt>
<dd><p>The previous expression must match one or more times.
</p>
</dd>
<dt>&lsquo;<samp>|</samp>&rsquo;</dt>
<dd><p>Either the previous or the following expressions must match.
</p></dd>
</dl>

<p>For example the following will replace &lsquo;<samp>ing</samp>&rsquo; with the dots
&lsquo;<samp>346</samp>&rsquo; when it is <em>not</em> preceded by a space or beginning of
input. What follows after the &lsquo;<samp>ing</samp>&rsquo; does not matter, hence the
&lsquo;<samp>-</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">match !%[^_] ing - 346
</pre></div>

<p>The following will replace &lsquo;<samp>con</samp>&rsquo; with the dots &lsquo;<samp>25</samp>&rsquo; when it
is preceded by a space, or beginning of input; then followed by a
&lsquo;<samp>c</samp>&rsquo; that is followed by any character but &lsquo;<samp>h</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">match %[^_] con c!h 25
</pre></div>

<hr>
<span id="Miscellaneous-Opcodes"></span><span id="Miscellaneous-Opcodes-1"></span><h3 class="section">2.15 Miscellaneous Opcodes</h3>

<dl compact="compact">
<dd><span id="index-include"></span>
<span id="include-opcode"></span></dd>
<dt><code>include filename</code></dt>
<dd><p>Read the file indicated by <code>filename</code> and incorporate or include
its entries into the table. Included files can include other files,
which can include other files, etc. For an example, see what files are
included by the entry include <samp>en-us-g1.ctb</samp> in the table
<samp>en-us-g2.ctb</samp>. If the included file is not in the same directory
as the main table, use a full path name for filename.
</p>
<span id="index-undefined"></span>
<span id="undefined-opcode"></span></dd>
<dt><code>undefined dots</code></dt>
<dd><p>If this opcode is used in a table any characters which have not been
handled in the table but are encountered in the text will be replaced
by the dot pattern. If this opcode is not used, any undefined
characters are replaced by <code>'\xhhhh'</code>, where the h&rsquo;s are
hexadecimal digits.
</p>
<span id="index-display"></span>
<span id="display-opcode"></span></dd>
<dt><code>display character dots</code></dt>
<dd><p>Associates dot patterns with the characters which will be sent to a
braille embosser, display or screen font. The character must be in the
range 0-255 and the dots must specify a single cell. Here are some
examples:
</p>
<div class="example">
<pre class="example"># When the character a is sent to the embosser or display,
# it will produce a dot 1.
display a 1
</pre></div>

<div class="example">
<pre class="example"># When the character L is sent to the display or embosser
# it will produce dots 1-2-3.
display L 123
</pre></div>

<p>The <code>display</code> opcode is optional. It is used when the embosser or
display has a different mapping of characters to dot patterns than
that given in <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>. If used, display
entries must proceed character-definition entries.
</p>
<p>A possible use case would be to define display opcodes so that the
result is Unicode braille for use on a display and a second set of
display opcodes (in a different file) to produce plain ASCII braille
for use with an embosser.
</p>
<span id="index-multind"></span>
<span id="multind-opcode"></span></dd>
<dt><code>multind dots opcode opcode ...</code></dt>
<dd><p>The <code>multind</code> opcode tells the back-translator that a sequence of
braille cells represents more than one braille indicator. For example,
in <samp>en-us-g2.ctb</samp> we have <code>multind 56-6 letsign capsletter</code>.
The back-translator can generally handle single braille indicators,
but it cannot apply them when they immediately follow each other. It
recognizes the letter sign if it is followed by a letter and takes
appropriate action. It also recognizes the capital sign if it is
followed by a letter. But when there is a letter sign followed by a
capital sign it fails to recognize the letter sign unless the sequence
has been defined with <code>multind</code>. A <code>multind</code> entry may not
contain a comment because liblouis would attempt to interpret it as an
opcode.
</p>
</dd>
</dl>

<hr>
<span id="Notes-on-Back_002dTranslation"></span><span id="Notes-on-Back_002dTranslation-1"></span><h2 class="chapter">3 Notes on Back-Translation</h2>

<span id="General-Notes"></span><span id="General-Notes-1"></span><h3 class="section">3.1 General Notes</h3>

<p>Back-translation refers to the process of translating backwards,
i.e. from Braille to text. For many years, Liblouis was mainly
concerned with forward translation, and so were most of the authors of
the translation tables. Today however, Liblouis is being used
extensively in conjunction with screen reading programs like NVDA and
JAWS for Windows as well as Braille note-takers like BrailleSense from
HIMS and BrailleNote from HumanWare. So when writing a translation
table for Liblouis, it is indeed relevant to consider how the table
will work when used for back-translation, if anything special must be
done, or if you want to write separate tables for forward translation
and back-translation.
</p>
<p>Back-translation is generally harder to do in a computer program than
forward translation. Ideally, any text could be translated to Braille
and then translated back to text giving exactly the same result as the
original. However, many Braille codes omit a lot of information and
leaves it to the reader to fill in the missing bits. An example of this
is letters with accents. In languages where accents are uncommon, e.g.
English, Accented letters are usually just marked with a Braille
indicator stating that there is an accent, but not which accent, even
though this may be crucial to the meaning of the word or the sentence.
Another example of this is when not all capital letters are marked in
the Braille code, but only the &quot;important&quot; capital letters. A third
example is when a Braille character serves as both a punctuation sign,
a math sign, and perhaps even as a contraction, and the Braille code
then leaves it up to the reader to use his/her knowledge of the context
to decide the meaning of the Braille character.
</p>
<p>In some cases, you may need to bend the rules of the Braille code if it
is important to create Braille that can be properly back-translated.
This may include marking all capital letters instead of just the
&quot;important&quot; ones, or perhaps marking a Braille character with an
indicator stating that this character should in fact be interpreted as
a math sign and not a punctuation or Braille contraction. In some
cases, the best solution may be to create two separate sets of tables
for forward translation: One set for Braille that must be
back-translatable (for use with screen readers and note-takers), and
another for good and nice literary Braille (for embossing).
But no matter how you bend the Braille code, the back-translation
process may not be perfect.
</p>
<span id="Back_002dtranslation-with-Liblouis"></span><span id="Back_002dtranslation-with-Liblouis-1"></span><h3 class="section">3.2 Back-translation with Liblouis</h3>

<p>Back-translation is carried out by the function
<code>lou_backTranslateString</code>. Its calling sequence is described in
<a href="#Programming-with-liblouis">Programming with liblouis</a>. <code>lou_backTranslateString</code> first
performs <code>pass4</code>, if
present, then <code>pass3</code>, then <code>pass2</code>, then the
backtranslation, then corrections. Note that this is exactly the
inverse of forward translation.
</p>
<p>Most opcodes can be preceded by <code>noback</code> opcode (see <a href="#noback-opcode"><code>noback</code></a>) or <code>nofor</code> opcode (see <a href="#nofor-opcode"><code>nofor</code></a>),
and the <code>correct</code>, <code>context</code> and multi-pass opcodes must be
preceded with either <code>noback</code> or <code>nofor</code>. So in most cases,
it will be perfectly possible to make one table for translation in both
directions, although a separate table for forward and backward
translation might be more readable in some cases.
</p>
<p>Most of the opcodes associated with pass 1 have two operands, a
character operand to the left and a dots operand to the right. During
forward translation, these operands are used to replace the characters
with the dot pattern according to the conditions of the opcode. The
opcode works from left to right. When back-translating, these opcodes
work the opposite way. The dot patterns are replaced by the text. The
opcodes work from right to left.
</p>
<p>On the other hand, the <code>correct</code>, <code>context</code> and multi-pass
opcodes have a test part to the left and an action part to the right.
These opcodes work from left to right in both translation directions.
The test is performed, and if true, the action is executed, i.e.
replacing, inserting or deleting characters or dots. This is why a
translation direction always has to be specified with these opcodes
using <code>noback</code> or <code>nofor</code>.
</p>
<hr>
<span id="Table-Metadata"></span><span id="Table-Metadata-1"></span><h2 class="chapter">4 Table Metadata</h2>

<p>Translation tables may contain metadata. This makes them
discoverable. Programs may for example use the Liblouis function
<a href="#lou_005ffindTable"><code>lou_findTable</code></a> to find a table based on a
special query of which the <a href="#Query-Syntax">syntax</a> is described
below.
</p>
<span id="Syntax"></span><h3 class="section">4.1 Syntax</h3>

<p>Metadata must be defined in special comments within the table
header. The table header is the area at the top of the file, before
the first translation rule, consisting of only comments or empty
lines. Any metadata within included tables is ignored.
</p>
<p>A metadata field must be defined on its own line, starting with
<code>#+</code>. It has the following syntax:
</p>
<div class="example">
<pre class="example">#+&lt;key&gt;: &lt;value&gt;
</pre></div>

<p>where &lsquo;<samp>&lt;key&gt;</samp>&rsquo; and &lsquo;<samp>&lt;value&gt;</samp>&rsquo; are sequences of one or more
characters <code>a</code> to <code>z</code>, <code>A</code> to <code>Z</code>, <code>0</code> to
<code>9</code>, <code>.</code>, <code>-</code>, and <code>_</code>. The colon that separates
the key and value may have zero or more spaces or tabs on either side.
</p>
<p>A value is optional. In case of no value the colon must be omitted as
well:
</p>
<div class="example">
<pre class="example">#+&lt;key&gt;
</pre></div>

<p>There is no restriction on which keys and values are allowed, as long
as the syntax is correct. However in order to be really useful there
must be some standard keys and values. A possible grammar is proposed
on the wiki page
<a href="https://github.com/liblouis/liblouis/wiki/Table-discovery-based-on-table-metadata#standard-metadata-tags">Standard metadata tags</a>.
</p>
<span id="Query-Syntax"></span><span id="Query-Syntax-1"></span><h3 class="section">4.2 Query Syntax</h3>

<p>A query that is passed to the <a href="#lou_005ffindTable"><code>lou_findTable</code></a>
function must have the following syntax:
</p>
<div class="example">
<pre class="example">&lt;feature1&gt; &lt;feature2&gt; &lt;feature3&gt; ...
</pre></div>

<p>where &lsquo;<samp>&lt;feature&gt;</samp>&rsquo; is either:
</p>
<div class="example">
<pre class="example">&lt;key&gt;: &lt;value&gt;
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example">&lt;key&gt;
</pre></div>

<p>Features are separated by one or more spaces or tabs. No spaces are
allowed around colons.
</p>
<hr>
<span id="Testing-Translation-Tables-interactively"></span><span id="Testing-Translation-Tables-interactively-1"></span><h2 class="chapter">5 Testing Translation Tables interactively</h2>

<p>A number of test programs are provided as part of the liblouis
package. They are intended for testing liblouis and for debugging
tables. None of them is suitable for braille transcription. An
application that can be used for transcription is <code>file2brl</code>,
which is part of the liblouisutdml package (see <a href="liblouisutdml.html#Top">Introduction</a> in <cite>Liblouisutdml User&rsquo;s and Programmer&rsquo;s Manual</cite>). The source
code of the test programs can be studied to learn how to use the
liblouis library and they can be used to perform the following
functions.
</p>
<span id="common-options"></span><p>All of these programs recognize the <samp>--help</samp> and
<samp>--version</samp> options.
</p>
<dl compact="compact">
<dt><samp>--help</samp></dt>
<dt><samp>-h</samp></dt>
<dd><p>Print a usage message listing all available options, then exit
successfully.
</p>
</dd>
<dt><samp>--version</samp></dt>
<dt><samp>-v</samp></dt>
<dd><p>Print the version number, then exit successfully.
</p>
</dd>
</dl>

<p>Most test programs let you specify one or multiple tables to use.
These tables are usually found in standard locations in the file
system or local to where the command is executed. See <a href="#How-tables-are-found">How tables are found</a>, for a description on how the tables are located.
</p>

<hr>
<span id="lou_005fdebug"></span><span id="lou_005fdebug-1"></span><h3 class="section">5.1 lou_debug</h3>
<span id="index-lou_005fdebug"></span>

<p>The <code>lou_debug</code> tool is intended for debugging liblouis
translation tables. The command line for <code>lou_debug</code> is:
</p>
<div class="example">
<pre class="example">lou_debug [OPTIONS] TABLE[,TABLE,...]
</pre></div>

<p>The command line options that are accepted by <code>lou_debug</code> are
described in <a href="#common-options">common options</a>.
</p>
<p>The table (or comma-separated list of tables) is compiled. If no
errors are found a brief command summary is printed, then the prompt
&lsquo;<samp>Command:</samp>&rsquo;. You can then input one of the command letters and get
output, as described below.
</p>
<p>Most of the commands print information in the various arrays of
<code>TranslationTableHeader</code>. Since these arrays are pointers to
chains of hashed items, the commands first print the hash number, then
the first item, then the next item chained to it, and so on. After
each item there is a prompt indicated by &lsquo;<samp>=&gt;</samp>&rsquo;. You can then press
enter (<kbd><span class="key">RET</span></kbd>) to see the next item in the chain or the first
item in the next chain. Or you can press <kbd>h</kbd> (for next-(h)ash) to
skip to the next hash chain. You can also press <kbd>e</kbd> to exit the
command and go back to the &lsquo;<samp>command:</samp>&rsquo; prompt.
</p>
<dl compact="compact">
<dt><kbd>h</kbd></dt>
<dd><p>Brings up a screen of somewhat more extensive help.
</p>
</dd>
<dt><kbd>f</kbd></dt>
<dd><p>Display the first forward-translation rule in the first non-empty hash
bucket. The number of the bucket is displayed at the beginning of the
chain. Each rule is identified by the word &lsquo;<samp>Rule:</samp>&rsquo;. The fields
are displayed by phrases consisting of the name of the field, an equal
sign, and its value. The before and after fields are displayed only if
they are nonzero. Special opcodes such as the <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) and
the multipass opcodes are shown with the code that instructs the
virtual machine that interprets them. If you want to see only the
rules for a particular character string you can type <kbd>p</kbd> at the
&lsquo;<samp>command:</samp>&rsquo; prompt. This will take you to the &lsquo;<samp>particular:</samp>&rsquo;
prompt, where you can press <kbd>f</kbd> and then type in the string. The
whole hash chain containing the string will be displayed.
</p>
</dd>
<dt><kbd>b</kbd></dt>
<dd><p>Display back-translation rules. This display is very similar to that
of forward translation rules except that the dot pattern is displayed
before the character string.
</p>
</dd>
<dt><kbd>c</kbd></dt>
<dd><p>Display character definitions, again within their hash chains.
</p>
</dd>
<dt><kbd>d</kbd></dt>
<dd><p>Displays single-cell dot definitions. If a character-definition opcode
gives a multi-cell dot pattern, it is displayed among the
back-translation rules.
</p>
</dd>
<dt><kbd>C</kbd></dt>
<dd><p>Display the character-to-dots map. This is set up by the
character-definition opcodes and can also be influenced by the
<code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>).
</p>
</dd>
<dt><kbd>D</kbd></dt>
<dd><p>Display the dot to character map, which shows which single-cell dot
patterns map to which characters.
</p>
</dd>
<dt><kbd>z</kbd></dt>
<dd><p>Show the multi-cell dot patterns which have been assigned to the
characters from 0 to 255 to comply with computer braille codes such as
a 6-dot code. Note that the character-definition opcodes should use
8-dot computer braille.
</p>
</dd>
<dt><kbd>p</kbd></dt>
<dd><p>Bring up a secondary (&lsquo;<samp>particular:</samp>&rsquo;) prompt from which you can
examine particular character strings, dot patterns, etc. The commands
(given in its own command summary) are very similar to those of the
main &lsquo;<samp>command:</samp>&rsquo; prompt, but you can type a character string or
dot pattern. They include <kbd>h</kbd>, <kbd>f</kbd>, <kbd>b</kbd>, <kbd>c</kbd>, <kbd>d</kbd>,
<kbd>C</kbd>, <kbd>D</kbd>, <kbd>z</kbd> and <kbd>x</kbd> (to exit this prompt), but not
<kbd>p</kbd>, <kbd>i</kbd> and <kbd>m</kbd>.
</p>
</dd>
<dt><kbd>i</kbd></dt>
<dd><p>Show braille indicators. This shows the dot patterns for various
opcodes such as the <code>capsletter</code> opcode (see <a href="#capsletter-opcode"><code>capsletter</code></a>) and the <code>numsign</code> opcode (see <a href="#numsign-opcode"><code>numsign</code></a>).
It also shows emphasis dot patterns, such as those for the
<code>begemphword</code> opcode (see <a href="#begemphword-opcode"><code>begemphword</code></a>), the <code>begemphphrase</code> opcode (see <a href="#begemphphrase-opcode"><code>begemphphrase</code></a>), etc. If a
given opcode has not been used nothing is printed for it.
</p>
</dd>
<dt><kbd>m</kbd></dt>
<dd><p>Display various miscellaneous information about the table, such as the
number of passes, whether certain opcodes have been used, and whether
there is a hyphenation table.
</p>
</dd>
<dt><kbd>q</kbd></dt>
<dd><p>Exit the program.
</p></dd>
</dl>

<hr>
<span id="lou_005ftrace"></span><span id="lou_005ftrace-1"></span><h3 class="section">5.2 lou_trace</h3>
<span id="index-lou_005ftrace"></span>

<p>When working on translation tables it is sometimes useful to determine
what rules were applied when translating a string. <code>lou_trace</code>
helps with exactly that. It list all the the applied rules for a given
translation table and an input string.
</p>
<div class="example">
<pre class="example">lou_trace [OPTIONS] TABLE[,TABLE,...]
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>)
<code>lou_trace</code> also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--forward</samp></dt>
<dt><samp>-f</samp></dt>
<dd><p>Trace a forward translation.
</p>
</dd>
<dt><samp>--backward</samp></dt>
<dt><samp>-b</samp></dt>
<dd><p>Trace a backward translation.
</p>
</dd>
</dl>

<p>If no options are given forward translation is assumed.
</p>
<p>Once started you can type an input string followed by <kbd><span class="key">RET</span></kbd>.
<code>lou_trace</code> will print the braille translation followed by
list of rules that were applied to produce the translation. A possible
invocation is listed in the following example:
</p>
<div class="example">
<pre class="example">$ lou_trace tables/en-us-g2.ctb 
the u.s. postal service
! u4s4 po/al s}vice
1.      largesign       the     2346
2.      repeated                0
3.      lowercase       u       136
4.      punctuation     .       46
5.      context _$l[&quot;.&quot;]$l      @256
6.      lowercase       s       234
7.      postpunc        .       256
8.      repeated                0
9.      begword post    1234-135-34
10.     largesign       a       1
11.     lowercase       l       123
12.     repeated                0
13.     lowercase       s       234
14.     always  er      12456
15.     lowercase       v       1236
16.     lowercase       i       24
17.     lowercase       c       14
18.     lowercase       e       15
19.     pass2   $s1-10  @0
20.     pass2   $s1-10  @0
21.     pass2   $s1-10  @0
</pre></div>

<hr>
<span id="lou_005fchecktable"></span><span id="lou_005fchecktable-1"></span><h3 class="section">5.3 lou_checktable</h3>
<span id="index-lou_005fchecktable"></span>

<p>To use this program type the following:
</p>
<div class="example">
<pre class="example">lou_checktable [OPTIONS] TABLE
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>)
<code>lou_checktable</code> also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--quiet</samp></dt>
<dt><samp>-q</samp></dt>
<dd><p>Do not write to standard error if there are no errors.
</p>
</dd>
</dl>

<p>If the table contains errors, appropriate messages will be displayed.
If there are no errors the message &lsquo;<samp>no errors found.</samp>&rsquo; will be
shown.
</p>
<hr>
<span id="lou_005fallround"></span><span id="lou_005fallround-1"></span><h3 class="section">5.4 lou_allround</h3>
<span id="index-lou_005fallround"></span>

<p>This program tests every capability of the liblouis library. It is
completely interactive. Invoke it as follows:
</p>
<div class="example">
<pre class="example">lou_allround [OPTIONS]
</pre></div>

<p>The command line options that are accepted by <code>lou_allround</code>
are described in <a href="#common-options">common options</a>.
</p>
<p>You will see a few lines telling you how to use the program. Pressing
one of the letters in parentheses and then enter will take you to a
message asking for more information or for the answer to a yes/no
question. Typing the letter &lsquo;<samp>r</samp>&rsquo; and then <tt class="key">RET</tt> will take you
to a screen where you can enter a line to be processed by the library
and then view the results.
</p>
<hr>
<span id="lou_005ftranslate-_0028program_0029"></span><span id="lou_005ftranslate-1"></span><h3 class="section">5.5 lou_translate</h3>
<span id="index-lou_005ftranslate-1"></span>

<p>This program translates whatever is on the standard input unit and
prints it on the standard output unit. It is intended for large-scale
testing of the accuracy of translation and back-translation. The
command line for <code>lou_translate</code> is:
</p>
<div class="example">
<pre class="example">lou_translate [OPTION] TABLE[,TABLE,...]
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>) this program
also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--forward</samp></dt>
<dt><samp>-f</samp></dt>
<dd><p>Do a forward translation.
</p>
</dd>
<dt><samp>--backward</samp></dt>
<dt><samp>-b</samp></dt>
<dd><p>Do a backward translation.
</p>
</dd>
</dl>

<p>If no options are given forward translation is assumed.
</p>
<p>Use the following command to do a forward translation with translation
table <samp>en-us-g2.ctb</samp>. The resulting braille is ASCII encoded (as
defined in <samp>en-us-g2.ctb</samp>).
</p>
<div class="example">
<pre class="example">lou_translate --forward en-us-g2.ctb &lt; input.txt
</pre></div>

<p>The next example illustrates a forward translation with translation
table <samp>en-us-g2.ctb</samp> and display table <samp>unicode.dis</samp>. The
resulting braille is encoded as Unicode dot patterns (as defined in
<samp>unicode.dis</samp>).
</p>
<div class="example">
<pre class="example">lou_translate --forward unicode.dis,en-us-g2.ctb &lt; input.txt
</pre></div>

<p>Use a pipe if you would rather just pass some given text to the
translator.
</p>
<div class="example">
<pre class="example">echo &quot;The quick brown fox jumps over the lazy dog&quot; | lou_translate -f unicode.dis,en-us-g2.ctb
</pre></div>

<p>The result will be written to standard output:
</p>
<div class="example">
<pre class="example">⠠⠮ ⠟⠅ ⠃⠗⠪⠝ ⠋⠕⠭ ⠚⠥⠍⠏⠎ ⠕⠧⠻ ⠮ ⠇⠁⠵⠽ ⠙⠕⠛
</pre></div>

<p>Backward translation can be done as follows:
</p>
<div class="example">
<pre class="example">echo &quot;,! qk br{n fox jumps ov} ! lazy dog&quot; | lou_translate --backward en-us-g2.ctb
</pre></div>

<p>which results in
</p>
<div class="example">
<pre class="example">The quick brown fox jumps over the lazy dog
</pre></div>

<p>You can also do a backward translation using Unicode dot patterns
</p>
<div class="example">
<pre class="example">echo &quot;⠠⠮ ⠟⠅ ⠃⠗⠪⠝ ⠋⠕⠭&quot; | lou_translate --backward unicode.dis,en-us-g2.ctb
</pre></div>

<p>resulting in
</p>
<div class="example">
<pre class="example">The quick brown fox
</pre></div>

<hr>
<span id="lou_005fcheckhyphens"></span><span id="lou_005fcheckhyphens-1"></span><h3 class="section">5.6 lou_checkhyphens</h3>
<span id="index-lou_005fcheckhyphens"></span>

<p>This program checks the accuracy of hyphenation in Braille translation
for both translated and untranslated words. It is completely
interactive. Invoke it as follows:
</p>
<div class="example">
<pre class="example">lou_checkhyphens [OPTIONS]
</pre></div>

<p>The command line options that are accepted by
<code>lou_checkhyphens</code> are described in <a href="#common-options">common options</a>.
</p>
<p>You will see a few lines telling you how to use the program.
</p>
<hr>
<span id="lou_005fcheckyaml"></span><span id="lou_005fcheckyaml-1"></span><h3 class="section">5.7 lou_checkyaml</h3>
<span id="index-lou_005fcheckyaml"></span>

<p>This program tests a liblouis table against a corpus of known good
Braille translations defined in YAML format. For a description of the
format refer to <a href="#YAML-Tests">YAML Tests</a>. The program returns 0 if all tests
pass or 1 if any of the tests fail. If <code>libyaml</code> is not installed
the program will simply skip all tests. Invoke it as follows:
</p>
<div class="example">
<pre class="example">lou_checkyaml YAML_TEST_FILE
</pre></div>

<p>The command line options that are accepted by
<code>lou_checkyaml</code> are described in <a href="#common-options">common options</a>.
</p>
<span id="index-Running-YAML-tests-manually"></span>
<span id="index-Running-individual-YAML-tests"></span>
<p>Due to some technical limitations the YAML tests work best if the
<code>LOUIS_TABLEPATH</code> is set up correctly. By running <code>make</code>
this is all taken care for you. You can also run individual YAML tests
as shown in the following example:
</p>
<div class="example">
<pre class="example">cd tests
make check TESTS=yaml/en-ueb-g2_backward.yaml
</pre></div>

<hr>
<span id="Automated-Testing-of-Translation-Tables"></span><span id="Automated-Testing-of-Translation-Tables-1"></span><h2 class="chapter">6 Automated Testing of Translation Tables</h2>

<p>There are a number of automated tests for liblouis and they are
proving to be of tremendous value. When changing the code the
developers can run the tests to see if anything broke.
</p>
<p>The easiest way to test the translation tables is to write a YAML file
where you define the table that is to be tested and any number of
words or phrases to translate together with their respective expected
translation.
</p>
<p>The YAML tests are data driven, i.e. you give the test data, a string
to translate and the expected output. The data is in a standard format
namely YAML. If you have <samp>libyaml</samp> installed they will
automatically be invoked as part of the standard <code>make check</code>
command.
</p>
<span id="YAML-Tests"></span><span id="YAML-Tests-1"></span><h3 class="section">6.1 YAML Tests</h3>
<p><a href="http://yaml.org/">YAML</a> is a human readable data serialization
format that allows for an easy and compact way to define tests.
</p>
<p>A YAML file first defines which tables are to be used for the tests.
Then it optionally defines flags such as the &lsquo;<samp>testmode</samp>&rsquo;. Finally
all the tests are defined.
</p>
<p>You can repeat the cycle as many times as you like (tables, optional
flags, tests). You can also define several rounds of tests for any
table, with or without the optional flags. Just remember that the
flags are reset to their default values each time you start a new
round of tests or load a new set of tables.
</p>
<p>Let&rsquo;s just look at a simple example how tests could be defined:
</p>

<div class="example">
<pre class="example"># comments start with '#' anywhere on a line
# first define which tables will be used for your tests
table: [unicode.dis, en-ueb-g1.ctb]

# then optionally define flags such as testmode. If no flags are
# defined forward translation is assumed

# now define the tests
tests:
  - # each test is a list.
    # The first item is the string to translate. Quoting of strings is
    # optional
    - hello
    # The second item is the expected translation
    - ⠓⠑⠇⠇⠕
  - # optionally you can define additional parameters in a third
    # item such as typeform or expected failure, etc
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - {typeform: {italic: '++++ '}, xfail: true}
  - # a simple, no-frills test
    - Good bye
    - ⠠⠛⠕⠕⠙ ⠃⠽⠑
  # same as above using &quot;flow style&quot; notation
  - [Good bye,  ⠠⠛⠕⠕⠙ ⠃⠽⠑]
</pre></div>

<p>The four basic components of a test file are as follows:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>table</samp>&rsquo;</dt>
<dd><p>A list containing table files, which the tests should be run against.
This is usually just one file, but for some situations more than one
file can be required. For example:
</p>
<div class="example">
<pre class="example">table: [hu-hu-g1.ctb, hyph_hu_HU.dic]
</pre></div>

<p>It is also possible to specify a table inline. <a href="#Inline-definition-of-tables">Inline definition of tables</a> below explains how to do this.
</p>
<p>A third way to specify a table is by its metadata. A table query,
which is essentially as list of &ldquo;features&rdquo;, is matched against the
<a href="#Table-Metadata">table metadata</a> defined inside the tables
contained in <code>LOUIS_TABLEPATH</code>. Only the best match is used for
the test.
</p>
<p>The syntax of the query is a variation of the <a href="#Query-Syntax">syntax</a> used for the <a href="#lou_005ffindTable"><code>lou_findTable</code></a>
function:
</p>
<div class="example">
<pre class="example">table:
  locale: fr
  grade: 1
</pre></div>

</dd>
<dt>&lsquo;<samp>display</samp>&rsquo;</dt>
<dd><p>A display table, which should be used to encode braille in the
test. This item is optional. It is only taken into account for the
&lsquo;<samp>forward</samp>&rsquo;, &lsquo;<samp>backward</samp>&rsquo; and &lsquo;<samp>bothDirections</samp>&rsquo; test
modes. If it is present it should be the first item of the file. If it
is not present, the braille encoding of each test is determined by the
table that is being tested.
</p>
<p>The next example shows how to test the <samp>en-ueb-g1.ctb</samp> table
using ASCII notation (as defined in <samp>en-ueb-g1.ctb</samp> itself):
</p>
<div class="example">
<pre class="example">table: [en-ueb-g1.ctb]
</pre></div>

<p>If you wanted to test the <samp>en-ueb-g1.ctb</samp> table using Unicode dot
patterns then you would use the following definition:
</p>
<div class="example">
<pre class="example">display: unicode.dis
table: [en-ueb-g1.ctb]
</pre></div>

</dd>
<dt>&lsquo;<samp>flags</samp>&rsquo;</dt>
<dd><p>The flags that apply for all tests in this file. At the moment only
the &lsquo;<samp>testmode</samp>&rsquo; flag is supported. It can have four possible
values:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>forward</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for forward translation.
</p></dd>
<dt>&lsquo;<samp>backward</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for backward translation.
</p></dd>
<dt>&lsquo;<samp>bothDirections</samp>&rsquo;</dt>
<dd><p>Checks that forward translating the input yields the expected output,
and backward translating the output yields the input again.
</p></dd>
<dt>&lsquo;<samp>display</samp>&rsquo;</dt>
<dd><p>Checks that a display table maps characters to the expected dot
patterns. The input is a string of characters, the output are the
corresponding dot patterns, as a string of Unicode braille
symbols. Virtual dots in the output are ignored.
</p></dd>
<dt>&lsquo;<samp>hyphenate</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for hyphenation.
</p></dd>
<dt>&lsquo;<samp>hyphenateBraille</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for hyphenation and the input is
braille.
</p></dd>
</dl>

<p>If no flags are defined forward translation is assumed.
</p>
</dd>
<dt>&lsquo;<samp>tests</samp>&rsquo;</dt>
<dd><p>A list of tests. Each test consists of a list of two, three or in some
cases four items. The first item is the test input. The second item is
the expected output. Braille input and output can be either Unicode
braille or an ASCII-braille like encoding, depending on the specified
test mode, translation mode and display table. Quoting strings is
optional. Comments can be inserted almost anywhere using the &lsquo;<samp>#</samp>&rsquo;
sign. A simple test would look at follows:
</p>
<div class="example">
<pre class="example">  - # a simple, no-frills test
    - Good bye
    - ⠠⠛⠕⠕⠙ ⠃⠽⠑
</pre></div>

<p>Using the more compact &ldquo;flow style&rdquo; notation it would look like the
following:
</p>
<div class="example">
<pre class="example">  - [Good bye, ⠠⠛⠕⠕⠙ ⠃⠽⠑]
</pre></div>

<p>An optional third item can contain additional options for a test such
as the typeform, or whether a test is expected to fail. The following
shows a typical example:
</p>
<div class="example">
<pre class="example">  -
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - {typeform: {italic: '++++ '}, xfail: true}
  # same test more compact
  - [Hello, ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄, {typeform: {italic: '++++ '}, xfail: true}]
</pre></div>

<p>The valid additional options for a test are as follows:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>xfail</samp>&rsquo;</dt>
<dd><p>Whether a test is expected to fail. If you expect a test to fail, set
this to &lsquo;<samp>true</samp>&rsquo;. If you prefer you can also specify a reason for
the failure:
</p>
<div class="example">
<pre class="example">  - [Hello, ⠨, {xfail: Test case is not complete}]
</pre></div>

<p>If you expect a test case to pass then just don&rsquo;t mark it with
&lsquo;<samp>xfail</samp>&rsquo; or if you really have to, set &lsquo;<samp>xfail</samp>&rsquo; to
&lsquo;<samp>false</samp>&rsquo; or &lsquo;<samp>off</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>typeform</samp>&rsquo;</dt>
<dd><p>The typeform used for a translation. It consists of one or more
emphasis specifications. For each character in the specifications that
is not a space the corresponding emphasis will be set. Valid options
for emphasis are &lsquo;<samp>italic</samp>&rsquo;, &lsquo;<samp>underline</samp>&rsquo;, &lsquo;<samp>bold</samp>&rsquo;,
&lsquo;<samp>computer_braille</samp>&rsquo;, &lsquo;<samp>passage_break</samp>&rsquo;, &lsquo;<samp>word_reset</samp>&rsquo;,
&lsquo;<samp>script</samp>&rsquo;, &lsquo;<samp>trans_note</samp>&rsquo;, &lsquo;<samp>trans_note_1</samp>&rsquo;,
&lsquo;<samp>trans_note_2</samp>&rsquo;, &lsquo;<samp>trans_note_3</samp>&rsquo;, &lsquo;<samp>trans_note_4</samp>&rsquo; or
&lsquo;<samp>trans_note_5</samp>&rsquo;. The following shows an example where both
&lsquo;<samp>italic</samp>&rsquo; and &lsquo;<samp>underline</samp>&rsquo; are specified:
</p>
<div class="example">
<pre class="example">  -
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - typeform:
        italic:    '++++ '
        underline: '    +'
</pre></div>

</dd>
<dt>&lsquo;<samp>inputPos</samp>&rsquo;</dt>
<dd><p>A list of 0-based input positions, one for each output position.
Useful when simulating screen reader interaction, to debug contraction
and cursor behavior as in the following example. Note that all
positions in this and the following examples start at 0. Also note
that in these examples the additional options are not passed using the
&ldquo;flow style&rdquo; notation.
</p>
<div class="example">
<pre class="example">  -
    - went
    - ⠺⠢⠞
    - inputPos: [0,1,3]
</pre></div>

</dd>
<dt>&lsquo;<samp>outputPos</samp>&rsquo;</dt>
<dd><p>A list of 0-based output positions, one for each input position. Useful when
simulating screen reader interaction, to debug contraction and cursor
behavior as in the following example.
</p>
<div class="example">
<pre class="example">  -
    - went
    - ⠺⠢⠞
    - outputPos: [0,1,1,2]
</pre></div>

</dd>
<dt>&lsquo;<samp>cursorPos</samp>&rsquo;</dt>
<dd><p>The cursor position for the given translation and optionally an
expected cursor position where the cursor is supposed to be after the
translation. Useful when simulating screen reader interaction, to
debug contraction and cursor behavior:
</p>
<p>The cursor position can take two forms: You can either specify a
single number or alternatively you can give a tuple of two numbers.
</p>
<dl compact="compact">
<dt>single number (e.g. &lsquo;<samp>4</samp>&rsquo;)</dt>
<dd><p>When you simply want to specify the cursor position for the given
translation you pass a number as in the following example:
</p>
<div class="example">
<pre class="example">  -
    - you went to
    - ⠽ ⠺⠑⠝⠞ ⠞⠕
    - mode: [compbrlAtCursor]
      cursorPos: 4
</pre></div>

</dd>
<dt>a tuple (e.g. &lsquo;<samp>[4,2]</samp>&rsquo;)</dt>
<dd><p>When you expect the cursor to be in a particular position after the
translation and you want to check this then pass a tuple of cursor
positions as in the following example:
</p>
<div class="example">
<pre class="example">  -
    - you went to
    - ⠽ ⠺⠑⠝⠞ ⠞⠕
    - mode: [compbrlAtCursor]
      cursorPos: [4,2]
</pre></div>
</dd>
</dl>

</dd>
<dt>&lsquo;<samp>mode</samp>&rsquo;</dt>
<dd><p>A list of translation modes that should be used for this test. If not
defined defaults to 0. Valid mode values are &lsquo;<samp>noContractions</samp>&rsquo;,
&lsquo;<samp>compbrlAtCursor</samp>&rsquo;, &lsquo;<samp>dotsIO</samp>&rsquo;, &lsquo;<samp>compbrlLeftCursor</samp>&rsquo;,
&lsquo;<samp>ucBrl</samp>&rsquo;, &lsquo;<samp>noUndefined</samp>&rsquo; or &lsquo;<samp>partialTrans</samp>&rsquo;.
</p>
<p>For a description of the various translation mode flags, please see
the function <a href="#lou_005ftranslateString">lou_translateString</a>.
</p>
</dd>
<dt>&lsquo;<samp>maxOutputLength</samp>&rsquo;</dt>
<dd><p>Define a maximum length of the output. This can be used to test the
behavior of liblouis in the face of a limited output buffer, for
example the length of the refreshable braille display.
</p>
</dd>
</dl>

</dd>
</dl>

<span id="Optional-test-description"></span><h4 class="subsection">6.1.1 Optional test description</h4>
<p>When a test contains three or four items the first item is assumed to
be a test description, the second item is the unicode text to be
tested and the third item is the expected braille output. Again an
optional fourth item can contain additional options for the test. The
following shows an example:
</p>
<div class="example">
<pre class="example">  -
    - Number-text-transitions with italic
    - 123abc
    - ⠼⠁⠃⠉⠨⠶⠰⠁⠃⠉⠨⠄
    - {typeform: '000111'}
</pre></div>

<p>In case the test fails the description will be printed together with
the expected and the actual braille output.
</p>
<p>For more examples and inspiration please see the YAML tests
(<samp>*.yaml</samp>) in the <samp>tests</samp> directory of the source
distribution.
</p>
<span id="Testing-multiple-tables-within-the-same-YAML-test-file"></span><h4 class="subsection">6.1.2 Testing multiple tables within the same YAML test file</h4>
<p>Sometimes you are more focused on testing a particular feature across
several tables rather than just testing one table. For that reason the
following is also allowed:
</p>
<div class="example">
<pre class="example">table: ...
tests:
  - [..., ...]
  - [..., ...]
table: ...
tests:
  - [..., ...]
  - [..., ...]
</pre></div>

<p>If you specify flags for the tests, remember that the flags are reset
to their default values when you specify a new table.
</p>
<span id="Multiple-test-sections-for-each-table"></span><h4 class="subsection">6.1.3 Multiple test sections for each table</h4>
<p>You can specify several sections of tests for each table, with or
without the optional flags. This is useful e.g. if you want to have
various tests for both forward and backward translation for the same
set of tables, especially if you are defining the table as part of
the yaml file (see next section). This feature is also useful if you
simply want to divide your tests into multiple sections for better
overview. All flags are reset to their default values when you start
a new test section.
</p>
<p>Thus, a yaml file might look as follows:
</p>
<div class="example">
<pre class="example">table: ...
tests:
  - [..., ...]
  - [..., ...]

# Some more tests
  tests:
  - [..., ...]
  - [..., ...]

# Some tests for back-translation - same table
flags: {testmode: backward}
  - [..., ...]
  - [..., ...]
</pre></div>

<span id="Inline-definition-of-tables"></span><span id="Inline-definition-of-tables-1"></span><h4 class="subsection">6.1.4 Inline definition of tables</h4>
<p>When testing very specific opcode combinations it is sometimes tedious
to create specific test tables just for that. Hence the YAML tests
allow for specification of table definitions inline. Instead of
referring to a table by name you just define the table inline by using
what the YAML spec calls a
<a href="http://www.yaml.org/spec/1.2/spec.html#id2795688">Literal Style
Block</a>. Start the definition with a &lsquo;<samp>|</samp>&rsquo;, then list the opcodes
with an indentation. The inline table ends when the indentation ends.
</p>
<div class="example">
<pre class="example">table: |
  sign a 1
  ...
tests:
  - ...
  - ...
</pre></div>

<span id="Running-the-same-test-data-on-multiple-tables"></span><h4 class="subsection">6.1.5 Running the same test data on multiple tables</h4>
<p>Sometimes you maintain multiple tables which are very similar and
basically contain the same test data. Instead of copying the YAML test
and changing the table name you can also define multiple tables. This
will cause the YAML tests to be checked against both tables.
</p>
<div class="example">
<pre class="example">table: nl-NL
table: nl-BE
tests:
  - [..., ...]
  - [..., ...]
</pre></div>

<hr>
<span id="Programming-with-liblouis"></span><span id="Programming-with-liblouis-1"></span><h2 class="chapter">7 Programming with liblouis</h2>


<hr>
<span id="Overview-_0028library_0029"></span><span id="Overview-2"></span><h3 class="section">7.1 Overview</h3>

<p>You use the liblouis library by calling the following functions,
<code>lou_translateString</code>, <code>lou_backTranslateString</code>,
<code>lou_translate</code>, <code>lou_backTranslate</code>,
<code>lou_registerLogCallback</code>, <code>lou_setLogLevel</code>,
<code>lou_logFile</code>, <code>lou_logPrint</code>, <code>lou_logEnd</code>,
<code>lou_getTable</code>, <code>lou_findTable</code>, <code>lou_indexTables</code>,
<code>lou_checkTable</code>, <code>lou_hyphenate</code>, <code>lou_charToDots</code>,
<code>lou_dotsToChar</code>, <code>lou_compileString</code>,
<code>lou_getTypeformForEmphClass</code>, <code>lou_readCharFromFile</code>,
<code>lou_version</code>, <code>lou_free</code> and <code>lou_charSize</code>. These are
described below. The header file, <samp>liblouis.h</samp>, also contains
brief descriptions. Liblouis is written in straight C. It has four
code modules, <samp>compileTranslationTable.c</samp>, <samp>logging.c</samp>,
<samp>lou_translateString.c</samp> and <samp>lou_backTranslateString.c</samp>. In
addition, there are two header files, <samp>liblouis.h</samp>, which defines
the API, and <samp>louis.h</samp>, used only internally and by
liblouisutdml. The latter includes <samp>liblouis.h</samp>.
</p>
<p>Persons who wish to use liblouis from Python may want to skip ahead to
<a href="#Python-bindings">Python bindings</a>.
</p>
<p><samp>compileTranslationTable.c</samp> keeps track of all translation tables
which an application has used. It is called by the translation,
hyphenation and checking functions when they start. If a table has not
yet been compiled <samp>compileTranslationTable.c</samp> checks it for
correctness and compiles it into an efficient internal representation.
The main entry point is <code>lou_getTable</code>. Since it is the module
that keeps track of memory usage, it also contains the <code>lou_free</code>
function. In addition, it contains the <code>lou_checkTable</code> function,
plus some utility functions which are used by the other modules.
</p>
<p>By default, liblouis handles all characters internally as 16-bit
unsigned integers. It can be compiled for 32-bit characters as
explained below. The meanings of these integers are not hard-coded.
Rather they are defined by the character-definition opcodes. However,
the standard printable characters, from decimal 32 to 126 are
recognized for the purpose of processing the opcodes. Hence, the
following definition is included in <samp>liblouis.h</samp>. It is correct
for computers with at least 32-bit processors.
</p>
<div class="example">
<pre class="example">typedef unsigned short int widechar
</pre></div>

<p>To make liblouis handle 32-bit Unicode simply remove the word
<code>short</code> in the above <code>typedef</code>. This will cause the translate and
back-translate functions to expect input in 32-bit form and to deliver
their output in this form. The input to the compiler (tables) is
unaffected except that two new escape sequences for 20-bit and 32-bit
characters are recognized.
</p>
<p>At run time, the width of a character specified during compilation may
be obtained using <code>lou_charSize</code>.
</p>
<p>Here are the definitions of the eleven liblouis functions and their
parameters. They are given in terms of 16-bit Unicode. If liblouis has
been compiled for 32-bit Unicode simply read 32 instead of 16.
</p>
<hr>
<span id="Data-structure-of-liblouis-tables"></span><span id="Data-structure-of-liblouis-tables-1"></span><h3 class="section">7.2 Data structure of liblouis tables</h3>

<p>The data structure <code>TranslationTableHeader</code> is defined by a
<code>typedef</code> statement in <samp>louis.h</samp>. To find the beginning,
search for the word &lsquo;<samp>header</samp>&rsquo;. As its name implies, this is
actually the table header. Data are placed in the <code>ruleArea</code>
array, which is the last item defined in this structure. This array is
declared with a length of 1 and is expanded as needed. The table
header consists mostly of arrays of pointers of size <code>HASHNUM</code>.
These pointers are actually offsets into <code>ruleArea</code> and point to
chains of items which have been placed in the same hash bucket by a
simple hashing algorithm. <code>HASHNUM</code> should be a prime and is
currently 1123. The structure of the table was chosen to optimize
speed rather than memory usage.
</p>
<p>The first part of the table contains miscellaneous information, such
as the number of passes and whether various opcodes have been used. It
also contains the amount of memory allocated to the table and the
amount actually used.
</p>
<p>The next section contains pointers to various braille indicators and
begins with <code>capitalSign</code>. The rules pointed to contain the 
dot pattern for the indicator and an opcode which is used by the
back-translator but does not appear in the list of opcodes. The
braille indicators also include various kinds of emphasis, such as
italic and bold and information about the length of emphasized
phrases. The latter is contained directly in the table item instead of
in a rule.
</p>
<p>After the braille indicators comes information about when a letter
sign should be used.
</p>
<p>Next is an array of size <code>HASHNUM</code> which points to character
definitions. These are created by the character-definition opcodes.
</p>
<p>Following this is a similar array pointing to definitions of
single-cell dot patterns. This is also created from the
character-definition opcodes. If a character definition contains a
multi-cell dot pattern this is compiled into ordinary forward and
backward rules. If such a multi-cell dot pattern contains a single
cell which has not previously been defined that cell is placed in this
array, but is given the attribute <code>space</code>.
</p>
<p>Next come arrays that map characters to single-cell dot patterns and
dots to characters. These are created from both character-definition
opcodes and display opcodes.
</p>
<p>Next is an array of size 256 which maps characters in this range to
dot patterns which may consist of multiple cells. It is used, for
example, to map &lsquo;<samp>{</samp>&rsquo; to dots 456-246. These mappings are created
by the <code>compdots</code> 
or the <code>comp6</code> opcode (see <a href="#comp6-opcode"><code>comp6</code></a>).
</p>
<p>Next are two small arrays that held pointers to chains of rules
produced by the <code>swapcd</code> opcode (see <a href="#swapcd-opcode"><code>swapcd</code></a>) and the <code>swapdd</code> opcode (see <a href="#swapdd-opcode"><code>swapdd</code></a>) and by
some multipass, <code>context</code> and <code>correct</code> opcodes.
</p>
<p>Now we get to an array of size <code>HASHNUM</code> which points to chains
of rules for forward translation.
</p>
<p>Following this is a similar array for back-translation.
</p>
<p>Finally is the <code>ruleArea</code>, an array of variable size to which
various structures are mapped and to which almost everything else
points.
</p>
<hr>
<span id="How-tables-are-found"></span><span id="How-tables-are-found-1"></span><h3 class="section">7.3 How tables are found</h3>
<span id="index-Table-search-path"></span>
<span id="index-LOUIS_005fTABLEPATH"></span>
<p>liblouis knows where to find all the tables that have been distributed
with it. So you can just give a table name such as <code>en-us-g2.ctb</code>
and liblouis will load it. You can also give a table name which
includes a path. If this is the first table in a list, all the tables
in the list must be on the same path. You can specify a path on which
liblouis will look for table names by setting the environment variable
<code>LOUIS_TABLEPATH</code>. This environment variable can contain one or
more paths separated by commas. On receiving a table name liblouis
first checks to see if it can be found on any of these paths. If not,
it then checks to see if it can be found in the current directory, or,
if the first (or only) name in a table list, if it contains a
path name, can be found on that path. If not, it checks to see if it
can be found on the path where the distributed tables have been
installed. If a table has already been loaded and compiled this
path-checking is skipped.
</p>
<hr>
<span id="Deprecation-of-the-logging-system"></span><span id="Deprecation-of-the-logging-system-1"></span><h3 class="section">7.4 Deprecation of the logging system</h3>

<p>As of version 2.6.0 <code>lou_logFile</code>, <code>lou_logPrint</code> and
<code>lou_logEnd</code> are deprecated. They are replaced by a more powerful,
abstract API consisting of <code>lou_registerLogCallback</code> and
<code>lou_setLogLevel</code>. 
</p>
<p>Usage of <code>lou_logFile</code>, <code>lou_logPrint</code> and <code>lou_logEnd</code> is
discouraged as they may not be part of future releases. Applications using
Liblouis should implement their own logging system.
</p>
<p>During the transitional phase, <code>lou_logPrint</code> is registered as default
callback in <code>lou_registerLogCallback</code>. <code>lou_logPrint</code> is overwritten
by the first call to <code>lou_registerLogCallback</code> and reattached when
<code>NULL</code> is set as callback. Note that calling <code>lou_logPrint</code> directly
will not cause an invocation of the registered callback.
</p>
<hr>
<span id="lou_005fversion"></span><span id="lou_005fversion-1"></span><h3 class="section">7.5 lou_version</h3>
<span id="index-lou_005fversion"></span>

<div class="example">
<pre class="example">char *lou_version ()
</pre></div>

<p>This function returns a pointer to a character string containing the
version of liblouis, plus other information, such as the release date
and perhaps notable changes.
</p>
<hr>
<span id="lou_005ftranslateString"></span><span id="lou_005ftranslateString-1"></span><h3 class="section">7.6 lou_translateString</h3>
<span id="index-lou_005ftranslateString"></span>

<div class="example">
<pre class="example">int lou_translateString(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int mode);
</pre></div>

<p>This function takes a string of 16-bit Unicode characters in
<code>inbuf</code> and translates it into a string of 16-bit characters in
<code>outbuf</code>. Each 16-bit character produces a particular dot pattern
in one braille cell when sent to an embosser or braille display or to
a screen type font. Which 16-bit character represents which dot pattern
is indicated by the character-definition and display opcodes in the
translation table.
</p>
<span id="translation_002dtables"></span><p>The <code>tableList</code> parameter points to a list of translation tables
separated by commas. See <a href="#How-tables-are-found">How tables are found</a>, for a description on
how the tables are located in the file system. If only one table is
given, no comma should be used after it. It is these tables which
control just how the translation is made, whether in Grade 2, Grade 1,
or something else.
</p>
<p>The tables in a list are all compiled into the same internal table.
The list is then regarded as the name of this table. As explained in
<a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a>, each table is a file which may
be plain text, big-endian Unicode or little-endian Unicode. A table
(or list of tables) is compiled into an internal representation the
first time it is used. Liblouis keeps track of which tables have been
compiled. For this reason, it is essential to call the <code>lou_free</code>
function at the end of your application to avoid memory leaks. Do
<em>NOT</em> call <code>lou_free</code> after each translation. This will
force liblouis to compile the translation tables each time they are
used, leading to great inefficiency.
</p>
<p>Note that both the <code>*inlen</code> and <code>*outlen</code> parameters are
pointers to integers. When the function is called, these integers
contain the maximum input and output lengths, respectively. When it
returns, they are set to the actual lengths used.
</p>
<span id="typeform-parameter"></span><p>The <code>typeform</code> parameter is used to indicate italic type,
boldface type, computer braille, etc. It is an array of <code>formtype</code>
with the same length as the input buffer pointed to by <code>*inbuf</code>.
However, it is used to pass back character-by-character results, so
enough space must be provided to match the <code>*outlen</code> parameter.
Each element indicates the typeform of the corresponding character
in the input buffer. The values and their meaning can be consulted in the
<code>typeforms</code> enum in <samp>liblouis.h</samp>. These values can be
added for multiple emphasis. If this parameter is <code>NULL</code>, no
checking for type forms is done. In addition, if this parameter is not
<code>NULL</code>, it is set on return to have an 8 at every position
corresponding to a character in <code>outbuf</code> which was defined to
have a dot representation containing dot 7, dot 8 or both, and to 0
otherwise.
</p>
<p>The <code>spacing</code> parameter is used to indicate differences in
spacing between the input string and the translated output string. It
is also of the same length as the string pointed to by <code>*inbuf</code>.
If this parameter is <code>NULL</code>, no spacing information is computed.
</p>
<p>The <code>mode</code> parameter specifies how the translation should be
done. The valid values of mode are defined in <samp>liblouis.h</samp>. They
are all powers of 2, so that a combined mode can be specified by
adding up different values.
</p>
<p>Note that the <code>mode</code> parameter is an integer, not a pointer to
an integer.
</p>
<p>A combination of the following mode flags can be used with the
<code>lou_translateString</code> function:
</p>
<dl compact="compact">
<dt><code>compbrlAtCursor</code></dt>
<dd><p>If this bit is set in the <code>mode</code> parameter the space-bounded
characters containing the cursor will be translated in computer
braille.
</p>
</dd>
<dt><code>compbrlLeftCursor</code></dt>
<dd><p>If this bit is set, only the characters to the left of the cursor will
be in computer braille. This bit overrides <code>compbrlAtCursor</code>.
</p>
</dd>
<dt><code>dotsIO</code></dt>
<dd><p>When this bit is set, during forward translation, Liblouis will produce
output as dot patterns. During back-translation Liblouis accepts input
as dot patterns. Note that the produced dot patterns are affected if
you have any <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) defined in any of your tables.
</p>
</dd>
<dt><code>ucBrl</code></dt>
<dd><p>The <code>ucBrl</code> (Unicode Braille) bit is used by the functions
<code>lou_charToDots</code> and <code>lou_translate</code>. It causes the dot
patterns to be Unicode Braille rather than the liblouis representation.
Note that you will not notice any change when setting <code>ucBrl</code>
unless <code>dotsIO</code> is also set. <code>lou_dotsToChar</code> and
<code>lou_backTranslate</code> recognize Unicode braille automatically.
</p>
</dd>
<dt><code>partialTrans</code></dt>
<dd><p>This flag specifies that back-translation input should be treated as an
incomplete word. Rules that apply only for complete words or at the end
of a word will not take effect. This is intended to be used when
translating input typed on a braille keyboard to provide a rough idea
to the user of the characters they are typing before the word is
complete.
</p>
</dd>
<dt><code>noUndefined</code></dt>
<dd><p>Setting this bit disables the output of hexadecimal values when
forward-translating undefined characters (characters that are not
matched by any rule), and dot numbers when back-translating undefined
braille patterns (braille patterns that are not matched by any
rule). The default is for liblouis to output the hexadecimal value (as
&rsquo;\xhhhh&rsquo;) of an undefined character when forward-translating and the
dot numbers (as \ddd/) of an undefined braille pattern when
back-translating.
</p>
<p>When back translating input from a braille keyboard cell by cell, it
is desirable to output characters as soon as they are
produced. Similarly, when back translating contracted braille, it is
desirable to provide a &quot;guess&quot; to the user of the characters they
typed. To achieve this, liblouis needs to have the ability to produce
no text when indicators (which don&rsquo;t produce a character by
themselves) are not followed by another cell. This works automatically
for indicators liblouis knows about such as capital sign, number sign,
etc., but it does not work for indicators which are not (and cannot
be) specifically defined as indicators. For example, in UEB, dots 4 5
6 alone produces the text &quot;\456/&quot;. Setting the noUndefined mode
suppresses this dot number output.
</p>
</dd>
</dl>

<p>The function returns 1 if no errors were encountered<a id="DOCF2" href="#FOOT2"><sup>2</sup></a> and 0 otherwise.
</p>
<hr>
<span id="lou_005ftranslate"></span><span id="lou_005ftranslate-2"></span><h3 class="section">7.7 lou_translate</h3>
<span id="index-lou_005ftranslate"></span>

<div class="example">
<pre class="example">int lou_translate(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int *outputPos,
  int *inputPos,
  int *cursorPos,
  int mode);
</pre></div>

<p>This function adds the parameters <code>outputPos</code>, <code>inputPos</code>
and <code>cursorPos</code>, to facilitate use in screen reader programs. The
<code>outputPos</code> parameter must point to an array of integers with at
least <code>inlen</code> elements. On return, this array will contain the
position in <code>outbuf</code> corresponding to each input position.
Similarly, <code>inputPos</code> must point to an array of integers of at
least <code>outlen</code> elements. On return, this array will contain the
position in <code>inbuf</code> corresponding to each position in
<code>outbuf</code>. <code>cursorPos</code> must point to an integer containing
the position of the cursor in the input. On return, it will contain
the cursor position in the output. Any parameter after <code>outlen</code>
may be <code>NULL</code>. In this case, the actions corresponding to it will
not be carried out.
</p>
<p>For a description of all other parameters, please see
<a href="#lou_005ftranslateString">lou_translateString</a>.
</p>
<hr>
<span id="lou_005fbackTranslateString"></span><span id="lou_005fbackTranslateString-1"></span><h3 class="section">7.8 lou_backTranslateString</h3>
<span id="index-lou_005fbackTranslateString"></span>

<div class="example">
<pre class="example">int lou_backTranslateString(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int mode);
</pre></div>

<p>This is exactly the opposite of <code>lou_translateString</code>.
<code>inbuf</code> is a string of 16-bit Unicode characters representing
braille. <code>outbuf</code> will contain a string of 16&ndash;bit Unicode
characters. <code>typeform</code> will indicate any emphasis found in the
input string, while <code>spacing</code> will indicate any differences in
spacing between the input and output strings. The <code>typeform</code> and
<code>spacing</code> parameters may be <code>NULL</code> if this information is
not needed. <code>mode</code> specifies how the back-translation
should be done.
</p>
<p>By default, if a dot pattern in the input is undefined
then its dot numbers will be included in the output (as \ddd/).
This does not occur if the <code>noUndefined</code> mode is set;
an undefined dot pattern simply produces no output.
</p>
<p>The <code>partialTrans</code> mode specifies that the input should be
treated as an incomplete word. That is, rules that apply only for
complete words or at the end of a word will not take effect. This is
intended to be used when translating input typed on a braille keyboard
to provide a rough idea to the user of the characters they are typing
before the word is complete.
</p>
<hr>
<span id="lou_005fbackTranslate"></span><span id="lou_005fbackTranslate-1"></span><h3 class="section">7.9 lou_backTranslate</h3>
<span id="index-lou_005fbackTranslate"></span>

<div class="example">
<pre class="example">int lou_backTranslate(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int *outputPos,
  int *inputPos,
  int *cursorPos,
  int mode);
</pre></div>

<p>This function is exactly the inverse of <code>lou_translate</code>.
</p>
<hr>
<span id="lou_005fhyphenate"></span><span id="lou_005fhyphenate-1"></span><h3 class="section">7.10 lou_hyphenate</h3>
<span id="index-lou_005fhyphenate"></span>

<div class="example">
<pre class="example">int lou_hyphenate (
  const char *tableList,
  const widechar *inbuf,
  int inlen,
  char *hyphens,
  int mode);
</pre></div>

<p>This function looks at the characters in <code>inbuf</code> and if it finds
a sequence of letters attempts to hyphenate it as a word. Note that
lou_hyphenate operates on single words only, and spaces or punctuation
marks between letters are not allowed. Leading and trailing
punctuation marks are ignored. The table named by the <code>tableList</code>
parameter must contain a hyphenation table. If it does not, the
function does nothing. <code>inlen</code> is the length of the character
string in <code>inbuf</code>. <code>hyphens</code> is an array of characters and
must be of size <code>inlen</code> + 1 (to account for the NULL terminator).
If hyphenation is successful it will have a 1 at the beginning of each
syllable and a 0 elsewhere. If the <code>mode</code> parameter is 0
<code>inbuf</code> is assumed to contain untranslated characters. Any
nonzero value means that <code>inbuf</code> contains a translation. In this
case, it is back-translated, hyphenation is performed, and it is
re-translated so that the hyphens can be placed correctly. The
<code>lou_translate</code> and <code>lou_backTranslate</code> functions are used
in this process. <code>lou_hyphenate</code> returns 1 if hyphenation was
successful and 0 otherwise. In the latter case, the contents of the
<code>hyphens</code> parameter are undefined. This function was provided for
use in liblouisutdml.
</p>
<hr>
<span id="lou_005fcompileString"></span><span id="lou_005fcompileString-1"></span><h3 class="section">7.11 lou_compileString</h3>
<span id="index-lou_005fcompileString"></span>

<div class="example">
<pre class="example">int lou_compileString (const char *tableList, const char *inString)
</pre></div>

<p>This function enables you to compile a table entry on the fly at 
run-time. The new entry is added to <code>tableList</code> and remains in force 
until <code>lou_free</code> is called. If <code>tableList</code> has not previously 
been loaded it is loaded and compiled. <code>inString</code> contains the 
table entry to be added. It may be anything valid. Error messages 
will be produced if it is invalid. The function returns 1 on success and 
0 on failure.
</p>
<hr>
<span id="lou_005fgetTypeformForEmphClass"></span><span id="lou_005fgetTypeformForEmphClass-1"></span><h3 class="section">7.12 lou_getTypeformForEmphClass</h3>
<span id="index-lou_005fgetTypeformForEmphClass"></span>

<div class="example">
<pre class="example">int lou_getTypeformForEmphClass (const char *tableList, const char *emphClass);
</pre></div>

<p>This function returns the typeform bit associated with the given
emphasis class. If the emphasis class is undefined this function
returns <code>0</code>. If errors are found error messages are logged to the
log callback (see <code>lou_registerLogCallback</code>) and the return value
is <code>0</code>. <code>tableList</code> is a list of names of table files
separated by commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). <code>emphClass</code> is the name of an
emphasis class.
</p>
<hr>
<span id="lou_005fdotsToChar"></span><span id="lou_005fdotsToChar-1"></span><h3 class="section">7.13 lou_dotsToChar</h3>
<span id="index-lou_005fdotsToChar"></span>

<div class="example">
<pre class="example">int lou_dotsToChar (
  const char *tableList,
  const widechar *inbuf,
  widechar *outbuf,
  int length,
  int mode)
</pre></div>

<p>This function takes a widechar string in <code>inbuf</code> consisting of dot 
patterns and converts it to a widechar string in <code>outbuf</code> 
consisting of characters according to the specifications in 
<code>tableList</code>. <code>length</code> is the length of both <code>inbuf</code> and 
<code>outbuf</code>. The dot patterns in <code>inbuf</code> can be in either 
liblouis format or Unicode braille. The function returns 1 on success 
and 0 on failure.
</p>
<p>Note that the <code>mode</code> parameter has no effect and is deprecated.
</p>
<hr>
<span id="lou_005fcharToDots"></span><span id="lou_005fcharToDots-1"></span><h3 class="section">7.14 lou_charToDots</h3>
<span id="index-lou_005fcharToDots"></span>

<div class="example">
<pre class="example">int lou_charToDots (
  const char *tableList,
  const widechar *inbuf,
  widechar *outbuf,
  int length,
  int mode)
</pre></div>

<p>This function is the inverse of <code>lou_dotsToChar</code>. It takes a
widechar string in <code>inbuf</code> consisting of characters and converts it
to a widechar string in <code>outbuf</code> consisting of dot patterns
according to the specifications in <code>tableList</code>. <code>length</code> is the
length of both <code>inbuf</code> and <code>outbuf</code>. The dot patterns in
<code>outbufbuf</code> are in liblouis format if the mode bit <code>ucBrl</code> is 
not set and in Unicode format if it is set. The function returns 1 on
success and 0 on failure.
</p>
<hr>
<span id="lou_005fregisterLogCallback"></span><span id="lou_005fregisterLogCallback-1"></span><h3 class="section">7.15 lou_registerLogCallback</h3>
<span id="index-lou_005fregisterLogCallback"></span>

<div class="example">
<pre class="example">typedef void (*logcallback) (
  int level,
  const char *message);
  
void lou_registerLogCallback (
  logcallback callback);
</pre></div>

<p>This function can be used to register a custom logging callback. The
callback must take two arguments, the log level and the message string. By default
log messages are printed to stderr, or if a filename was specified
with <code>lou_logFile</code> then messages are logged to that
file. <code>lou_registerLogCallback</code> overrides the default
callback. Passing <code>NULL</code> resets to the default callback.
</p>
<hr>
<span id="lou_005fsetLogLevel"></span><span id="lou_005fsetLogLevel-1"></span><h3 class="section">7.16 lou_setLogLevel</h3>
<span id="index-lou_005fsetLogLevel"></span>

<div class="example">
<pre class="example">typedef enum
{
  LOU_LOG_ALL = 0,
  LOU_LOG_DEBUG = 10000,
  LOU_LOG_INFO = 20000,
  LOU_LOG_WARN = 30000,
  LOU_LOG_ERROR = 40000,
  LOU_LOG_FATAL = 50000,
  LOU_LOG_OFF = 60000
} logLevels;
void lou_setLogLevel (
  logLevels level);
</pre></div>

<p>This function can be used to influence the amount of logging, from
fatal error messages only to detailed debugging messages. Supported
values are <code>LOU_LOG_DEBUG</code>, <code>LOU_LOG_INFO</code>,
<code>LOU_LOG_WARN</code>, <code>LOU_LOG_ERROR</code>, <code>LOU_LOG_FATAL</code> and
<code>LOU_LOG_OFF</code>. Enabling logging at a given level also enables
logging at all higher levels. Setting the level to <code>LOU_LOG_OFF</code>
disables logging. The default level is <code>LOU_LOG_INFO</code>.
</p>
<hr>
<span id="lou_005flogFile"></span><span id="lou_005flogFile-_0028deprecated_0029"></span><h3 class="section">7.17 lou_logFile (deprecated)</h3>
<span id="index-lou_005flogFile"></span>

<div class="example">
<pre class="example">void lou_logFile (
  char *fileName);
</pre></div>

<p>This function is used when it is not convenient either to let messages
be printed on stderr or to use redirection, as when liblouis is used
in a GUI application or in liblouisutdml. Any error messages generated
will be printed to the file given in this call. The entire path name of
the file must be given.
</p>
<p>This function is deprecated. See <a href="#Deprecation-of-the-logging-system">Deprecation of the logging system</a>.
</p>
<hr>
<span id="lou_005flogPrint"></span><span id="lou_005flogPrint-_0028deprecated_0029"></span><h3 class="section">7.18 lou_logPrint (deprecated)</h3>
<span id="index-lou_005flogPrint"></span>

<div class="example">
<pre class="example">void lou_logPrint (
  char *format,
  ...);
</pre></div>

<p>This function is called like <code>fprint</code>. It can be used by other
libraries to print messages to the file specified by the call to
<code>lou_logFile</code>. In particular, it is used by the companion
library liblouisutdml.
</p>
<p>This function is deprecated. See <a href="#Deprecation-of-the-logging-system">Deprecation of the logging system</a>.
</p>
<hr>
<span id="lou_005flogEnd"></span><span id="lou_005flogEnd-_0028deprecated_0029"></span><h3 class="section">7.19 lou_logEnd (deprecated)</h3>
<span id="index-lou_005flogEnd"></span>

<div class="example">
<pre class="example">lou_logEnd ();
</pre></div>

<p>This function is used at the end of processing a document to close the 
log file, so that it can be read by the rest of the program.
</p>
<p>This function is deprecated. See <a href="#Deprecation-of-the-logging-system">Deprecation of the logging system</a>.
</p>
<hr>
<span id="lou_005fsetDataPath"></span><span id="lou_005fsetDataPath-1"></span><h3 class="section">7.20 lou_setDataPath</h3>
<span id="index-lou_005fsetDataPath"></span>

<div class="example">
<pre class="example">char *lou_setDataPath (
  char *path);
</pre></div>

<p>This function is used to tell liblouis and liblouisutdml where tables
and files are located. It thus makes them completely relocatable, even
on Linux. The <code>path</code> is the directory where the subdirectories
<code>liblouis/tables</code> and <code>liblouisutdml/lbu_files</code> are rooted
or located. The function returns a pointer to the <code>path</code>.
</p>
<hr>
<span id="lou_005fgetDataPath"></span><span id="lou_005fgetDataPath-1"></span><h3 class="section">7.21 lou_getDataPath</h3>
<span id="index-lou_005fgetDataPath"></span>

<div class="example">
<pre class="example">char *lou_getDataPath ();
</pre></div>

<p>This function returns a pointer to the path set by
<code>lou_setDataPath</code>. If no path has been set it returns
<code>NULL</code>.
</p>
<hr>
<span id="lou_005fgetTable"></span><span id="lou_005fgetTable-1"></span><h3 class="section">7.22 lou_getTable</h3>
<span id="index-lou_005fgetTable"></span>

<div class="example">
<pre class="example">void *lou_getTable (
  char *tableList);
</pre></div>

<p><code>tableList</code> is a list of names of table files separated by
commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). If no errors are found this function
returns a pointer to the compiled table. If errors are found error
messages are logged to the log callback (see
<code>lou_registerLogCallback</code>). Errors result in a <code>NULL</code>
pointer being returned.
</p>
<hr>
<span id="lou_005ffindTable"></span><span id="lou_005ffindTable-1"></span><h3 class="section">7.23 lou_findTable</h3>
<span id="index-lou_005ffindTable"></span>

<div class="example">
<pre class="example">char *lou_findTable (const char *query);
</pre></div>

<p>This function can be used to find a table based on
metadata. <code>query</code> is a string in the special <a href="#Query-Syntax">query syntax</a>. It is matched against <a href="#Table-Metadata">table
metadata</a> inside the tables that were previously indexed with
<a href="#lou_005findexTables"><code>lou_indexTables</code></a>. Returns the file name of
the best match. Returns <code>NULL</code> if the query is invalid or if no
match can be found.
</p>
<p>The match algorithm works as follows:
</p>
<ul>
<li> For every table a match quotient with the query is computed. The table
with the highest (positive) match quotient wins. If no table has a
positive quotient, there is no match.
</li><li> A query is a list of features. Features defined first have a higher
importance (have a higher impact on the final quotient) than features
defined later.
</li><li> A feature that matches a metadata field in the table (keys equal and
values equal, or both values absent) adds to the quotient.
</li><li> A feature that is undefined in the table (no field with that key)
creates a medium penalty.
</li><li> A feature that is defined in the table but does not match (keys equal
but values not equal) creates the highest penalty.
</li><li> Every field in the table that has no corresponding feature in the
query creates a very small penalty.
</li></ul>

<hr>
<span id="lou_005findexTables"></span><span id="lou_005findexTables-1"></span><h3 class="section">7.24 lou_indexTables</h3>
<span id="index-lou_005findexTables"></span>

<div class="example">
<pre class="example">void lou_indexTables (const char **tables);
</pre></div>

<p>This function must be called prior to
<a href="#lou_005ffindTable"><code>lou_findTable</code></a>. It parses, analyzes and
indexes all specified tables. <code>tables</code> must be an array of file
names. Tables that contain invalid metadata are ignored.
</p>
<hr>
<span id="lou_005fcheckTable"></span><span id="lou_005fcheckTable-1"></span><h3 class="section">7.25 lou_checkTable</h3>
<span id="index-lou_005fcheckTable"></span>

<div class="example">
<pre class="example">int lou_checkTable (const char *tableList);
</pre></div>

<p>This function does the same as <code>lou_getTable</code> but does not return
a pointer to the resulting table. It is to be preferred if only the
validity of a table needs to be checked. <code>tableList</code> is a list of
names of table files separated by commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). If no errors are found this function
returns a non-zero. If errors are found error messages are logged to
the log callback (see <code>lou_registerLogCallback</code>) and the return
value is <code>0</code>.
</p>
<hr>
<span id="lou_005freadCharFromFile"></span><span id="lou_005freadCharFromFile-1"></span><h3 class="section">7.26 lou_readCharFromFile</h3>
<span id="index-lou_005freadCharFromFile"></span>

<div class="example">
<pre class="example">int lou_readCharFromFile (
  const char *fileName,
  int *mode);
</pre></div>

<p>This function is provided for situations where it is necessary to read
a file which may contain little-endian or big-endian 16-bit Unicode
characters or ASCII8 characters. The return value is a little-endian
character, encoded as an integer. The <code>fileName</code> parameter is the
name of the file to be read. The <code>mode</code> parameter is a pointer to
an integer which must be set to 1 on the first call. After that, the
function takes care of it. On end-of-file the function returns
<code>EOF</code>.
</p>
<hr>
<span id="lou_005ffree"></span><span id="lou_005ffree-1"></span><h3 class="section">7.27 lou_free</h3>
<span id="index-lou_005ffree"></span>

<div class="example">
<pre class="example">void lou_free ();
</pre></div>

<p>This function should be called at the end of the application to free
all memory allocated by liblouis. Failure to do so will result in
memory leaks. Do <em>NOT</em> call <code>lou_free</code> after each
translation. This will force liblouis to compile the translation
tables every time they are used, resulting in great inefficiency.
</p>
<hr>
<span id="lou_005fcharSize"></span><span id="lou_005fcharSize-1"></span><h3 class="section">7.28 lou_charSize</h3>
<span id="index-lou_005fcharSize"></span>

<div class="example">
<pre class="example">int lou_charSize ();
</pre></div>

<p>This function returns the size of <code>widechar</code> in bytes and can
therefore be used to differentiate between 16-bit and 32bit-Unicode
builds of liblouis.
</p>
<hr>
<span id="Python-bindings"></span><span id="Python-bindings-1"></span><h3 class="section">7.29 Python bindings</h3>

<p>There are Python bindings for <code>lou_translateString</code>,
<code>lou_translate</code>, <code>lou_backTranslateString</code>,
<code>lou_backTranslate</code>, <code>lou_hyphenate</code>, <code>checkTable</code>,
<code>lou_compileString</code> and <code>lou_version</code>. For installation
instructions see the the <samp>README</samp> file in the <samp>python</samp>
directory. Usage information is included in the Python module itself.
</p>

<hr>
<span id="Concept-Index"></span><span id="Concept-Index-1"></span><h2 class="unnumbered">Concept Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Characters-operand">Characters operand</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Dots-operand">Dots operand</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOUIS_005fTABLEPATH">LOUIS_TABLEPATH</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-tables-are-found">How tables are found</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multi_002dcell-dot-pattern">Multi-cell dot pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-O">O</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Opcode">Opcode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-R">R</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Running-individual-YAML-tests">Running individual YAML tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckyaml">lou_checkyaml</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Running-YAML-tests-manually">Running YAML tests manually</a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckyaml">lou_checkyaml</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-S">S</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Standing-alone">Standing alone</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Opcodes-for-Standing-Alone-Sequences">Opcodes for Standing Alone Sequences</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-T">T</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Table-search-path">Table search path</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-tables-are-found">How tables are found</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Concept-Index_cp_letter-V">V</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Virtual-dots">Virtual dots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<span id="Opcode-Index"></span><span id="Opcode-Index-1"></span><h2 class="unnumbered">Opcode Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Opcode-Index_opcode_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-opcode" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-after">after</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-always">always</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-attribute">attribute</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-B">B</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-base">base</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-before">before</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begcaps">begcaps</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begcapsword">begcapsword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begcomp">begcomp</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computer-braille">Computer braille</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemph">begemph</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Permanent-indicator">Permanent indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemphphrase">begemphphrase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase-indicator">Phrase indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemphword">begemphword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Word-indicator">Word indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begmidword">begmidword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begmode">begmode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begmodeword">begmodeword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begnum">begnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begword">begword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-capsletter">capsletter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-capsmodechars">capsmodechars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-capsnocont">capsnocont</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Processing-Opcodes">Special Processing Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comp6">comp6</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compbrl">compbrl</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context">context</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contraction">contraction</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-correct">correct</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-correct-Opcode">The correct Opcode</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-decpoint">decpoint</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Symbol-Opcodes">Special Symbol Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit">digit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-display">display</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-E">E</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-emphclass">emphclass</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Emphasis-classes">Emphasis classes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-emphletter">emphletter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Letter-indicator">Letter indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-emphmodechars">emphmodechars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Word-indicator">Word indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endcaps">endcaps</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endcapsword">endcapsword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endcomp">endcomp</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Computer-braille">Computer braille</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemph">endemph</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Permanent-indicator">Permanent indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphphrase-after">endemphphrase after</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase-indicator">Phrase indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphphrase-before">endemphphrase before</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase-indicator">Phrase indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphword">endemphword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Word-indicator">Word indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endmode">endmode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endmodeword">endmodeword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endnum">endnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endword">endword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exactdots">exactdots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-G">G</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-grouping">grouping</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-H">H</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hyphen">hyphen</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Symbol-Opcodes">Special Symbol Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-I">I</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-include">include</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-J">J</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-joinnum">joinnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-joinword">joinword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-largesign">largesign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lenemphphrase">lenemphphrase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase-indicator">Phrase indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letsign">letsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letter">letter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-litdigit">litdigit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lowercase">lowercase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lowword">lowword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-match">match</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-match-Opcode">The match Opcode</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-math">math</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midendnumericmodechars">midendnumericmodechars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midendword">midendword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midnum">midnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midword">midword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modeletter">modeletter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multind">multind</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-N">N</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-noback">noback</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocont">nocont</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocontractsign">nocontractsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocross">nocross</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noemphchars">noemphchars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Permanent-indicator">Permanent indicator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nofor">nofor</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsign">noletsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsignafter">noletsignafter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsignbefore">noletsignbefore</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numericmodechars">numericmodechars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numericnocontchars">numericnocontchars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numsign">numsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-P">P</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-partword">partword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass2">pass2</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass3">pass3</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass4">pass4</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-postpunc">postpunc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prepunc">prepunc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prfword">prfword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punctuation">punctuation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-R">R</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-repeated">repeated</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rependword">rependword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-replace">replace</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-repword">repword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-S">S</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-seqafterchars">seqafterchars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Opcodes-for-Standing-Alone-Sequences">Opcodes for Standing Alone Sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seqafterpattern">seqafterpattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Opcodes-for-Standing-Alone-Sequences">Opcodes for Standing Alone Sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seqbeforechars">seqbeforechars</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Opcodes-for-Standing-Alone-Sequences">Opcodes for Standing Alone Sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-seqdelimiter">seqdelimiter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Opcodes-for-Standing-Alone-Sequences">Opcodes for Standing Alone Sequences</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sign">sign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space">space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sufword">sufword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapcc">swapcc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapcd">swapcd</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapdd">swapdd</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syllable">syllable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-U">U</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-undefined">undefined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uppercase">uppercase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Opcode-Index_opcode_letter-W">W</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-word">word</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Opcode-Index_opcode_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<span id="Function-Index"></span><span id="Function-Index-1"></span><h2 class="unnumbered">Function Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Function-Index_fn_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fbackTranslate"><code>lou_backTranslate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fbackTranslate">lou_backTranslate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fbackTranslateString"><code>lou_backTranslateString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fbackTranslateString">lou_backTranslateString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcharSize"><code>lou_charSize</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcharSize">lou_charSize</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcharToDots"><code>lou_charToDots</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcharToDots">lou_charToDots</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcheckTable"><code>lou_checkTable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckTable">lou_checkTable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcompileString"><code>lou_compileString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcompileString">lou_compileString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fdotsToChar"><code>lou_dotsToChar</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fdotsToChar">lou_dotsToChar</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ffindTable"><code>lou_findTable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ffindTable">lou_findTable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ffree"><code>lou_free</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ffree">lou_free</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetDataPath"><code>lou_getDataPath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetDataPath">lou_getDataPath</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetTable"><code>lou_getTable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetTable">lou_getTable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetTypeformForEmphClass"><code>lou_getTypeformForEmphClass</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetTypeformForEmphClass">lou_getTypeformForEmphClass</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fhyphenate"><code>lou_hyphenate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fhyphenate">lou_hyphenate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005findexTables"><code>lou_indexTables</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005findexTables">lou_indexTables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogEnd"><code>lou_logEnd</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogEnd">lou_logEnd</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogFile"><code>lou_logFile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogFile">lou_logFile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogPrint"><code>lou_logPrint</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogPrint">lou_logPrint</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005freadCharFromFile"><code>lou_readCharFromFile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005freadCharFromFile">lou_readCharFromFile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fregisterLogCallback"><code>lou_registerLogCallback</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fregisterLogCallback">lou_registerLogCallback</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fsetDataPath"><code>lou_setDataPath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fsetDataPath">lou_setDataPath</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fsetLogLevel"><code>lou_setLogLevel</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fsetLogLevel">lou_setLogLevel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslate"><code>lou_translate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslate">lou_translate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslateString"><code>lou_translateString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslateString">lou_translateString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fversion"><code>lou_version</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fversion">lou_version</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<span id="Program-Index"></span><span id="Program-Index-1"></span><h2 class="unnumbered">Program Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Program-Index_pg_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-pg" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Program-Index_pg_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fallround"><code>lou_allround</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fallround">lou_allround</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcheckhyphens"><code>lou_checkhyphens</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckhyphens">lou_checkhyphens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fchecktable"><code>lou_checktable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fchecktable">lou_checktable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcheckyaml"><code>lou_checkyaml</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckyaml">lou_checkyaml</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fdebug"><code>lou_debug</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fdebug">lou_debug</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftrace"><code>lou_trace</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftrace">lou_trace</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslate-1"><code>lou_translate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslate-_0028program_0029">lou_translate (program)</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Program-Index_pg_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT1" href="#DOCF1">(1)</a></h3>
<p>See
<a href="https://github.com/liblouis/liblouis/issues/500#issuecomment-365753137">https://github.com/liblouis/liblouis/issues/500#issuecomment-365753137</a>.</p>
<h5><a id="FOOT2" href="#DOCF2">(2)</a></h3>
<p>When the
output buffer is not big enough, <code>lou_translateString</code> returns a
partial translation that is more or less accurate up until the
returned <code>inlen</code>/<code>outlen</code>, and treats it as a successful
translation, i.e. also returns 1.</p>
</div>
<hr>



</body>
</html>
